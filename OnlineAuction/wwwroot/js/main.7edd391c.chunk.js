(this.webpackJsonponlineauction=this.webpackJsonponlineauction||[]).push([[0],{41:function(e,t,n){},60:function(e,t,n){},68:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(1),s=n(29),c=n.n(s),i=n(11),o=n(13),u=n(25),l=n(44),d=n(15),b=n(16),j=n(20),p=n(19),h=n(9),f=n(4),m=n.n(f),O=n(8),v=n(36),g="OnlineAuction",x="returnUrl",_="message",w="logout-callback",k="logout",N="logged-out",y="login",C="login-callback",S="login-failed",L="profile",A="register",U="/authentication",I={DefaultLoginRedirectPath:"/",ApiAuthorizationClientConfigurationUrl:"/_configuration/".concat(g),ApiAuthorizationPrefix:U,Login:"".concat(U,"/").concat(y),LoginFailed:"".concat(U,"/").concat(S),LoginCallback:"".concat(U,"/").concat(C),Register:"".concat(U,"/").concat(A),Profile:"".concat(U,"/").concat(L),LogOut:"".concat(U,"/").concat(k),LoggedOut:"".concat(U,"/").concat(N),LogOutCallback:"".concat(U,"/").concat(w),IdentityRegisterPath:"/Identity/Account/Register",IdentityManagePath:"/Identity/Account/Manage"},R="admin",P="user",E=new(function(){function e(){Object(d.a)(this,e),this._callbacks=[],this._nextSubscriptionId=0,this._user=null,this._isAuthenticated=!1,this._popUpDisabled=!0}return Object(b.a)(e,[{key:"isAuthenticated",value:function(){var e=Object(O.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getUser();case 2:return t=e.sent,e.abrupt("return",!!t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getUser",value:function(){var e=Object(O.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._user||!this._user.profile){e.next=2;break}return e.abrupt("return",this._user.profile);case 2:return e.next=4,this.ensureUserManagerInitialized();case 4:return e.next=6,this.userManager.getUser();case 6:return t=e.sent,e.abrupt("return",t&&t.profile);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAccessToken",value:function(){var e=Object(O.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ensureUserManagerInitialized();case 2:return e.next=4,this.userManager.getUser();case 4:return t=e.sent,e.abrupt("return",t&&t.access_token);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"signIn",value:function(){var e=Object(O.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ensureUserManagerInitialized();case 2:return e.prev=2,e.next=5,this.userManager.signinRedirect(this.createArguments(t));case 5:return e.abrupt("return",this.redirect());case 8:return e.prev=8,e.t0=e.catch(2),console.log("Redirect authentication error: ",e.t0),e.abrupt("return",this.error(e.t0));case 12:case"end":return e.stop()}}),e,this,[[2,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"completeSignIn",value:function(){var e=Object(O.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.ensureUserManagerInitialized();case 3:return e.next=5,this.userManager.signinCallback(t);case 5:return n=e.sent,this.updateState(n),e.abrupt("return",this.success(n&&n.state));case 10:return e.prev=10,e.t0=e.catch(0),console.log("There was an error signing in: ",e.t0),e.abrupt("return",this.error("There was an error signing in."));case 14:case"end":return e.stop()}}),e,this,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=Object(O.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ensureUserManagerInitialized();case 2:if(e.prev=2,!this._popUpDisabled){e.next=5;break}throw new Error("Popup disabled. Change 'AuthorizeService.js:AuthorizeService._popupDisabled' to false to enable it.");case 5:return e.next=7,this.userManager.signoutPopup(this.createArguments());case 7:return this.updateState(void 0),e.abrupt("return",this.success(t));case 11:return e.prev=11,e.t0=e.catch(2),console.log("Popup signout error: ",e.t0),e.prev=14,e.next=17,this.userManager.signoutRedirect(this.createArguments(t));case 17:return e.abrupt("return",this.redirect());case 20:return e.prev=20,e.t1=e.catch(14),console.log("Redirect signout error: ",e.t1),e.abrupt("return",this.error(e.t1));case 24:case"end":return e.stop()}}),e,this,[[2,11],[14,20]])})));return function(t){return e.apply(this,arguments)}}()},{key:"completeSignOut",value:function(){var e=Object(O.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ensureUserManagerInitialized();case 2:return e.prev=2,e.next=5,this.userManager.signoutCallback(t);case 5:return n=e.sent,this.updateState(null),e.abrupt("return",this.success(n&&n.data));case 10:return e.prev=10,e.t0=e.catch(2),console.log("There was an error trying to log out '".concat(e.t0,"'.")),e.abrupt("return",this.error(e.t0));case 14:case"end":return e.stop()}}),e,this,[[2,10]])})));return function(t){return e.apply(this,arguments)}}()},{key:"updateState",value:function(e){this._user=e,this._isAuthenticated=!!this._user,this.notifySubscribers()}},{key:"subscribe",value:function(e){return this._callbacks.push({callback:e,subscription:this._nextSubscriptionId++}),this._nextSubscriptionId-1}},{key:"unsubscribe",value:function(e){var t=this._callbacks.map((function(t,n){return t.subscription===e?{found:!0,index:n}:{found:!1}})).filter((function(e){return!0===e.found}));if(1!==t.length)throw new Error("Found an invalid number of subscriptions ".concat(t.length));this._callbacks.splice(t[0].index,1)}},{key:"notifySubscribers",value:function(){for(var e=0;e<this._callbacks.length;e++){(0,this._callbacks[e].callback)()}}},{key:"createArguments",value:function(e){return{useReplaceToNavigate:!0,data:e}}},{key:"error",value:function(e){return{status:D.Fail,message:e}}},{key:"success",value:function(e){return{status:D.Success,state:e}}},{key:"redirect",value:function(){return{status:D.Redirect}}},{key:"ensureUserManagerInitialized",value:function(){var e=Object(O.a)(m.a.mark((function e(){var t,n,a=this;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===this.userManager){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,fetch(I.ApiAuthorizationClientConfigurationUrl);case 4:if((t=e.sent).ok){e.next=7;break}throw new Error("Could not load settings for '".concat(g,"'"));case 7:return e.next=9,t.json();case 9:(n=e.sent).automaticSilentRenew=!0,n.includeIdTokenInSilentRenew=!0,n.userStore=new v.WebStorageStateStore({prefix:g}),this.userManager=new v.UserManager(n),this.userManager.events.addUserSignedOut(Object(O.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.userManager.removeUser();case 2:a.updateState(void 0);case 3:case"end":return e.stop()}}),e)}))));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"hasRole",value:function(){var e=Object(O.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getUser();case 2:if(!(n=e.sent)){e.next=11;break}if(!(n.role instanceof Array)){e.next=8;break}return e.abrupt("return",n.role.includes(t));case 8:return e.abrupt("return",n.role===t);case 9:e.next=12;break;case 11:return e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"instance",get:function(){return E}}]),e}()),T=E,D={Redirect:"redirect",Success:"success",Fail:"fail"};function M(){return Object(a.jsx)("div",{className:"loader"})}var F=n(3),W=n.n(F);function z(){var e=W()("main","main__loading-page","loading-page","container-border");return Object(a.jsx)("div",{className:e,children:Object(a.jsx)(M,{})})}var V=function(e){Object(j.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={message:void 0},a}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.action;switch(e){case y:this.login("/");break;case C:this.processLoginCallback();break;case S:var t=new URLSearchParams(window.location.search).get(_);this.setState({message:t});break;case L:this.redirectToProfile();break;case A:this.redirectToRegister();break;default:throw new Error("Invalid action '".concat(e,"'"))}}},{key:"render",value:function(){var e=this.props.action,t=this.state.message;if(t)return Object(a.jsx)("div",{children:t});switch(e){case y:case C:return Object(a.jsx)(z,{});case L:case A:return Object(a.jsx)(z,{});default:throw new Error("Invalid action '".concat(e,"'"))}}},{key:"login",value:function(){var e=Object(O.a)(m.a.mark((function e(t){var n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={returnUrl:t},e.next=3,T.signIn(n);case 3:a=e.sent,e.t0=a.status,e.next=e.t0===D.Redirect?7:e.t0===D.Success?8:e.t0===D.Fail?11:13;break;case 7:return e.abrupt("break",14);case 8:return e.next=10,this.navigateToReturnUrl(t);case 10:return e.abrupt("break",14);case 11:return this.setState({message:a.message}),e.abrupt("break",14);case 13:throw new Error("Invalid status result ".concat(a.status,"."));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"processLoginCallback",value:function(){var e=Object(O.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.location.href,e.next=3,T.completeSignIn(t);case 3:n=e.sent,e.t0=n.status,e.next=e.t0===D.Redirect?7:e.t0===D.Success?8:e.t0===D.Fail?11:13;break;case 7:throw new Error("Should not redirect.");case 8:return e.next=10,this.navigateToReturnUrl(this.getReturnUrl(n.state));case 10:return e.abrupt("break",14);case 11:return this.setState({message:n.message}),e.abrupt("break",14);case 13:throw new Error("Invalid authentication result status '".concat(n.status,"'."));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getReturnUrl",value:function(e){var t=new URLSearchParams(window.location.search).get(x);if(t&&!t.startsWith("".concat(window.location.origin,"/")))throw new Error("Invalid return url. The return url needs to have the same origin as the current page.");return e&&e.returnUrl||t||"".concat(window.location.origin,"/")}},{key:"redirectToRegister",value:function(){this.redirectToApiAuthorizationPath("".concat(I.IdentityRegisterPath,"?").concat(x,"=").concat(encodeURI(I.Login)))}},{key:"redirectToProfile",value:function(){this.redirectToApiAuthorizationPath(I.IdentityManagePath)}},{key:"redirectToApiAuthorizationPath",value:function(e){var t="".concat(window.location.origin).concat(e);window.location.replace(t)}},{key:"navigateToReturnUrl",value:function(e){window.location.replace(e)}}]),n}(r.Component);function H(e){var t=e.message,n=Object(r.useMemo)((function(){return W()("main","main__custom-message-page","container-border")}),[]);return Object(a.jsx)("div",{className:n,children:t})}var B=function(e){Object(j.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={message:void 0,isReady:!1,authenticated:!1},a}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.action;switch(e){case k:window.history.state.state.local?this.logout(this.getReturnUrl()):this.setState({isReady:!0,message:"The logout was not initiated from within the page."});break;case w:this.processLogoutCallback();break;case N:this.setState({isReady:!0,message:"You successfully logged out!"});break;default:throw new Error("Invalid action '".concat(e,"'"))}this.populateAuthenticationState()}},{key:"render",value:function(){var e=this.state,t=e.isReady,n=e.message;if(!t)return Object(a.jsx)("div",{});if(n)return Object(a.jsx)(H,{message:n});var r=this.props.action;switch(r){case k:case w:return Object(a.jsx)(z,{});case N:return Object(a.jsx)("div",{children:n});default:throw new Error("Invalid action '".concat(r,"'"))}}},{key:"logout",value:function(){var e=Object(O.a)(m.a.mark((function e(t){var n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={returnUrl:t},e.next=3,T.isAuthenticated();case 3:if(!e.sent){e.next=20;break}return e.next=7,T.signOut(n);case 7:a=e.sent,e.t0=a.status,e.next=e.t0===D.Redirect?11:e.t0===D.Success?12:e.t0===D.Fail?15:17;break;case 11:return e.abrupt("break",18);case 12:return e.next=14,this.navigateToReturnUrl(t);case 14:return e.abrupt("break",18);case 15:return this.setState({message:a.message}),e.abrupt("break",18);case 17:throw new Error("Invalid authentication result status.");case 18:e.next=21;break;case 20:this.setState({message:"You successfully logged out!"});case 21:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"processLogoutCallback",value:function(){var e=Object(O.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.location.href,e.next=3,T.completeSignOut(t);case 3:n=e.sent,e.t0=n.status,e.next=e.t0===D.Redirect?7:e.t0===D.Success?8:e.t0===D.Fail?11:13;break;case 7:throw new Error("Should not redirect.");case 8:return e.next=10,this.navigateToReturnUrl(this.getReturnUrl(n.state));case 10:return e.abrupt("break",14);case 11:return this.setState({message:n.message}),e.abrupt("break",14);case 13:throw new Error("Invalid authentication result status.");case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"populateAuthenticationState",value:function(){var e=Object(O.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.isAuthenticated();case 2:t=e.sent,this.setState({isReady:!0,authenticated:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getReturnUrl",value:function(e){var t=new URLSearchParams(window.location.search).get(x);if(t&&!t.startsWith("".concat(window.location.origin,"/")))throw new Error("Invalid return url. The return url needs to have the same origin as the current page.");return e&&e.returnUrl||t||"".concat(window.location.origin).concat(I.LoggedOut)}},{key:"navigateToReturnUrl",value:function(e){return window.location.replace(e)}}]),n}(r.Component),Y=function(e){Object(j.a)(n,e);var t=Object(p.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){return Object(a.jsxs)(r.Fragment,{children:[Object(a.jsx)(h.b,{path:I.Login,render:function(){return J(y)}}),Object(a.jsx)(h.b,{path:I.LoginFailed,render:function(){return J(S)}}),Object(a.jsx)(h.b,{path:I.LoginCallback,render:function(){return J(C)}}),Object(a.jsx)(h.b,{path:I.Profile,render:function(){return J(L)}}),Object(a.jsx)(h.b,{path:I.Register,render:function(){return J(A)}}),Object(a.jsx)(h.b,{path:I.LogOut,render:function(){return G(k)}}),Object(a.jsx)(h.b,{path:I.LogOutCallback,render:function(){return G(w)}}),Object(a.jsx)(h.b,{path:I.LoggedOut,render:function(){return G(N)}})]})}}]),n}(r.Component);function J(e){return Object(a.jsx)(V,{action:e})}function G(e){return Object(a.jsx)(B,{action:e})}var q=n(71),Z=n(30),K=n(70),Q=n(72),X=n(69),$=n(73),ee=n(12),te=function(e){Object(j.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={isAuthenticated:!1,userName:null},a}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=this;this._subscription=T.subscribe((function(){return e.populateState()})),this.populateState()}},{key:"componentWillUnmount",value:function(){T.unsubscribe(this._subscription)}},{key:"populateState",value:function(){var e=Object(O.a)(m.a.mark((function e(){var t,n,a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([T.isAuthenticated(),T.getUser()]);case 2:t=e.sent,n=Object(ee.a)(t,2),a=n[0],r=n[1],this.setState({isAuthenticated:a,userName:r&&r.name});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.isAuthenticated,n=e.userName;if(t){var a="".concat(I.Profile),r={pathname:"".concat(I.LogOut),state:{local:!0}};return this.authenticatedView(n,a,r)}var s="".concat(I.Register),c="".concat(I.Login);return this.anonymousView(s,c)}},{key:"authenticatedView",value:function(e,t,n){return Object(a.jsxs)(r.Fragment,{children:[Object(a.jsx)(X.a,{children:Object(a.jsx)($.a,{className:"header__button",tag:i.b,to:t,children:"Profile"})}),Object(a.jsx)(X.a,{children:Object(a.jsx)($.a,{className:"header__button",tag:i.b,to:n,children:"Logout"})})]})}},{key:"anonymousView",value:function(e,t){return Object(a.jsxs)(r.Fragment,{children:[Object(a.jsx)(X.a,{children:Object(a.jsx)($.a,{tag:i.b,className:"header__button",to:e,children:"Register"})}),Object(a.jsx)(X.a,{children:Object(a.jsx)($.a,{tag:i.b,className:"header__button",to:t,children:"Login"})})]})}}]),n}(r.Component),ne=(n(60),n(41),function(e){Object(j.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={collapsed:!0,isAdmin:!1,role:"none"},a.titleClasses=W()("title","logo"),a.headerClasses=W()("casing__header","header","container-border"),a.toggleNavbar=a.toggleNavbar.bind(Object(Z.a)(a)),a}return Object(b.a)(n,[{key:"toggleNavbar",value:function(){this.setState({collapsed:!this.state.collapsed})}},{key:"componentDidMount",value:function(){var e=this;this.subsctibeId=T.subscribe((function(){return e.isAdmin()})),this.isAdmin()}},{key:"componentWillUnmount",value:function(){T.unsubscribe(this.subsctibeId)}},{key:"isAdmin",value:function(){var e=Object(O.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.hasRole(R);case 2:t=e.sent,this.setState({isAdmin:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return this.buttonsWrapperClasses=W()("header__buttons-wrapper",{"header__buttons-wrapper--open":!this.state.collapsed}),Object(a.jsx)("header",{children:Object(a.jsx)(K.a,{children:Object(a.jsxs)(q.a,{className:this.headerClasses,children:[Object(a.jsxs)("div",{className:"header__logo",children:[Object(a.jsx)("h1",{className:"header__title",children:Object(a.jsx)(Q.a,{className:this.titleClasses,tag:i.b,to:"/",children:"Online Auction"})}),Object(a.jsx)("div",{className:"header__logo-description",children:"The biggest online auction platform in solar system!"})]}),Object(a.jsxs)("a",{className:"header__menu-button header__menu-button--hidden",onClick:function(){return e.toggleNavbar()},children:[Object(a.jsx)("div",{className:"menu-icon-bar"}),Object(a.jsx)("div",{className:"menu-icon-bar"}),Object(a.jsx)("div",{className:"menu-icon-bar"})]}),Object(a.jsxs)("ul",{className:this.buttonsWrapperClasses,children:[Object(a.jsx)(X.a,{children:Object(a.jsx)($.a,{className:"header__button",tag:i.b,to:"/",children:"Home"})}),this.state.isAdmin&&Object(a.jsx)(X.a,{children:Object(a.jsx)($.a,{className:"header__button",tag:i.b,to:"/new-lot",children:"New Lot"})}),Object(a.jsx)(X.a,{children:Object(a.jsx)($.a,{className:"header__button",tag:i.b,to:"/winners",children:"Winners"})}),Object(a.jsx)(te,{})]})]})})})}}]),n}(r.Component));ne.displayName=ne.name;var ae="api/lots",re="/lot-hub",se="https://localhost:44390/api/images/icons";function ce(){var e=Object(r.useMemo)((function(){return{footerClasses:W()("casing__footer","footer","container-border"),cardNameClasses:W()("footer__card-name","title"),snInfoClasses:W()("footer__card-info","footer__sn-info")}}),[]);return Object(a.jsxs)("footer",{className:e.footerClasses,children:[Object(a.jsxs)("div",{className:"footer__card",children:[Object(a.jsx)("div",{className:e.cardNameClasses,children:"copyrights"}),Object(a.jsx)("div",{className:"footer__card-info",children:"@2020. Online Auction. All rights reserved"})]}),Object(a.jsxs)("div",{className:"footer__card",children:[Object(a.jsx)("div",{className:e.cardNameClasses,children:"connect me"}),Object(a.jsxs)("ul",{className:"footer__sn-wrapper",children:[Object(a.jsx)("li",{className:"footer__sn",children:Object(a.jsxs)("a",{className:"footer__sn-link",href:"mailto:Mickita.Sharshun@itechart-group.com",children:[Object(a.jsx)("img",{className:"footer__sn-icon",src:"".concat(se,"/outlook-icon.png"),alt:"outlook"}),Object(a.jsx)("span",{className:e.snInfoClasses,children:"Outlook"})]})}),Object(a.jsx)("li",{className:"footer__sn",children:Object(a.jsxs)("a",{className:"footer__sn-link",href:"https://github.com/sharshoon",children:[Object(a.jsx)("img",{className:"footer__sn-icon",src:"".concat(se,"/github-icon.png"),alt:"github"}),Object(a.jsx)("span",{className:e.snInfoClasses,children:"GitHub"})]})}),Object(a.jsx)("li",{className:"footer__sn",children:Object(a.jsxs)("a",{className:"footer__sn-link",href:"https://join.skype.com/invite/b4dT1glZDPZ4",children:[Object(a.jsx)("img",{className:"footer__sn-icon",src:"".concat(se,"/skype-icon.png"),alt:"skype"}),Object(a.jsx)("span",{className:e.snInfoClasses,children:"Skype"})]})})]})]})]})}function ie(e){return Object(a.jsxs)("div",{children:[Object(a.jsx)(ne,{}),Object(a.jsx)(q.a,{children:e.children}),Object(a.jsx)(ce,{})]})}var oe=n(6),ue=n(47),le=function(e){Object(j.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={ready:!1,authenticated:!1},a}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=this;this._subscription=T.subscribe((function(){return e.authenticationChanged()})),this.populateAuthenticationState()}},{key:"componentWillUnmount",value:function(){T.unsubscribe(this._subscription)}},{key:"render",value:function(){var e=this.state,t=e.ready,n=e.authenticated,r=document.createElement("a");r.href=this.props.path;var s="".concat(r.protocol,"//").concat(r.host).concat(r.pathname).concat(r.search).concat(r.hash),c="".concat(I.Login,"?").concat(x,"=").concat(encodeURI(s));if(t){var i=this.props,o=i.component,u=Object(ue.a)(i,["component"]);return Object(a.jsx)(h.b,Object(oe.a)(Object(oe.a)({},u),{},{render:function(e){return n?Object(a.jsx)(o,Object(oe.a)({},e)):Object(a.jsx)(h.a,{to:c})}}))}return Object(a.jsx)("div",{})}},{key:"populateAuthenticationState",value:function(){var e=Object(O.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.isAuthenticated();case 2:t=e.sent,this.setState({ready:!0,authenticated:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"authenticationChanged",value:function(){var e=Object(O.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({ready:!1,authenticated:!1}),e.next=3,this.populateAuthenticationState();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(r.Component),de="FETCH_LOTS",be="FETCH_LOT",je="UPDATE_LOT",pe="UPDATE_LOT_PRICE",he="UPDATE_LOT_ACTIVITY",fe="CLOSE_LOT",me="DELETE_LOT",Oe="LOT/SHOW_LOADER",ve="LOT/HIDE_LOADER",ge="WINNERS/SHOW_LOADER",xe="WINNERS/HIDE_LOADER",_e="USER/SHOW_LOADER",we="USER/HIDE_LOADER";function ke(e,t,n){return function(){var a=Object(O.a)(m.a.mark((function a(r){var s,c;return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r(ye()),a.next=3,fetch("".concat(ae,"?page=").concat(e,"&showSold=").concat(t,"&showUnsold=").concat(n));case 3:return s=a.sent,a.next=6,s.json();case 6:c=a.sent,r({type:de,payload:Object(oe.a)(Object(oe.a)({},c),{},{activePage:e,showSold:t,showUnsold:n})}),r(Ce());case 9:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}function Ne(e,t){return function(n){n({type:pe,payload:{id:e,price:t}})}}function ye(){return{type:Oe}}function Ce(){return{type:ve}}var Se=function(e,t,n){return Object(a.jsxs)("div",{className:n,children:[Object(a.jsx)("div",{className:"timer__time",children:t}),Object(a.jsx)("div",{children:e})]})},Le=function(e){return e%3600/60|0},Ae=n(24),Ue=function(e,t){var n=(new Ae.a).withUrl(re).build();return n.on("ActivateLot",(function(n,a){t.id===parseInt(a)&&e(function(e){return function(t){t({type:je,payload:e})}}(Object(oe.a)(Object(oe.a)({},t),{},{isActive:"active"===n})))})),n.start(),n};function Ie(e){var t,n=e.lot,s=Object(r.useState)(0),c=Object(ee.a)(s,2),i=c[0],u=c[1],l=Object(r.useRef)(null),d=Object(r.useRef)(null),b=Object(r.useRef)(!1),j=Object(o.b)(),p=W()("timer__item",{"timer__item--translucent":!n.isActive}),h=W()("main__timer","timer");return Object(r.useEffect)((function(){return d.current=!0,n&&!l.current&&(l.current=Ue(j,n),l.current.on("DecreaseTime",(function(e,t,a){d.current&&a===n.id&&(b.current||(b.current=!0,j(function(e,t){return function(n){n({type:he,payload:{id:e,isActive:t}})}}(n.id,!0))),u(e),n.priceUsd!==t&&j(Ne(n.id,t)))})),l.current.on("Stop",(function(e){n.id===e&&j(function(e){return function(t){t({type:fe,payload:{id:e}})}}(n.id))}))),function(){return d.current=!1}}),[n,l]),n.isSold||!n.isActive?null:Object(a.jsxs)("div",{className:"main__timer-wrapper",children:[undefined,Object(a.jsxs)("div",{className:h,children:[Se("hours",(t=i,t/3600|0),p),Se("minutes",Le(i),p),Se("seconds",i%60|0,p)]})]})}function Re(e){var t=e.id,n=Object(o.b)(),s=Object(o.c)((function(e){return e.lotsInfo.lots.find((function(e){return e.id===parseInt(t)}))})),c=Object(r.useRef)(null),i=Object(r.useState)(!1),u=Object(ee.a)(i,2),l=u[0],d=u[1],b=Object(r.useCallback)(function(){var e=Object(O.a)(m.a.mark((function e(t){var a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T.getAccessToken();case 3:if(null===(a=e.sent)){e.next=13;break}return c.current=(new Ae.a).withUrl("/increase-price",{accessTokenFactory:function(){return a}}).build(),c.current.on("PriceUpdate",(function(e){var a=JSON.parse(e);a.lotId===t.id&&a.successed&&n(Ne(a.lotId,a.priceUsd))})),e.next=9,c.current.start();case 9:return e.next=11,T.hasRole(P);case 11:r=e.sent,d(r);case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),alert("error");case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}(),[n]);Object(r.useEffect)((function(){b(s)}),[b]);var j=Object(r.useCallback)((function(e,t){c.current&&c.current.invoke("IncreasePrice",t.id,parseInt(t.priceUsd)||parseInt(t.minPriceUsd),e)}),[]),p=Object(r.useMemo)((function(){return W()("button","lot-info__button")}),[]),h=Object(r.useCallback)((function(e,t){return Math.trunc(e+e*t/100)}),[]);return s.isSold||!s.isActive?null:Object(a.jsxs)("div",{children:[!l&&Object(a.jsx)("p",{className:"lot-info__error",children:"You cannot place bets as you are not a user"}),Object(a.jsxs)("div",{className:"lot-info__buttons",children:[Object(a.jsxs)("button",{className:p,disabled:!s.isActive||!l,onClick:function(){return j(5,s)},children:["+5% [",h(s.priceUsd||s.minPriceUsd,5),"]"]}),Object(a.jsxs)("button",{className:p,disabled:!s.isActive||!l,onClick:function(){return j(10,s)},children:["+10% [",h(s.priceUsd||s.minPriceUsd,10),"]"]}),Object(a.jsxs)("button",{className:p,disabled:!s.isActive||!l,onClick:function(){return j(20,s)},children:["+20% [",h(s.priceUsd||s.minPriceUsd,20),"]"]})]})]})}var Pe={soldLotClasses:W()("main__lot-message","main__lot-message--sold"),notActiveClasses:W()("main__lot-message","main__lot-message--not-active")};function Ee(e){var t=e.id,n=Object(o.b)(),s=Object(o.c)((function(e){return e.lotsInfo.lots.find((function(e){return e.id===parseInt(t)}))})),c=Object(o.c)((function(e){return e.app.lotLoading}));Object(r.useEffect)((function(){s||n(function(e){return function(){var t=Object(O.a)(m.a.mark((function t(n){var a,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(ye()),t.next=3,fetch("".concat(ae,"/").concat(e));case 3:if(!(a=t.sent).ok){t.next=9;break}return t.next=7,a.json();case 7:r=t.sent,n({type:be,payload:r});case 9:n(Ce());case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))}),[]);var i=Object(r.useMemo)((function(){return{titleClasses:W()("main__title","title"),lotInfoClasses:W()("main__lot-info","lot-info","info")}}),[]);return c?Object(a.jsx)(z,{}):s?Object(a.jsx)("div",{className:"main container-border",children:Object(a.jsxs)("div",{className:"main__lot-info-wrapper",children:[Object(a.jsxs)("div",{className:i.titleClasses,children:[s.name,s.isSold&&Object(a.jsx)("div",{className:Pe.soldLotClasses,children:"Lot is sold!"}),!s.isSold&&!s.isActive&&Object(a.jsx)("div",{className:Pe.notActiveClasses,children:"Lot is not active!"})]}),Object(a.jsx)("img",{className:"main__image",src:s.imagePath,alt:"lot"}),Object(a.jsxs)("div",{className:i.lotInfoClasses,children:[Object(a.jsxs)("div",{className:"lot-info__item",children:[Object(a.jsx)("span",{className:"lot-info__name",children:"Description: "}),Object(a.jsx)("span",{children:s.description})]}),Object(a.jsxs)("div",{className:"lot-info__item",children:[Object(a.jsx)("span",{className:"lot-info__name",children:"Price: "}),Object(a.jsxs)("span",{children:[s.priceUsd||s.minPriceUsd," USD"]})]}),Object(a.jsx)(Ie,{lot:s}),Object(a.jsx)(Re,{id:t})]})]})}):Object(a.jsx)(H,{message:"There is no such lot on the server"})}function Te(e){var t=e.lot,n=Object(r.useMemo)((function(){return{lotPreviewClasses:W()("main__lot-preview","lot-preview","container-border"),lotPreviewInfo:W()("lot-preview__info","info"),lotNameClasses:W()("lot-preview__name title")}}),[]),s=Object(r.useMemo)((function(){return W()("button","lot-preview__button")}),[]);return Object(a.jsxs)("div",{className:n.lotPreviewClasses,children:[Object(a.jsx)("div",{className:"lot-preview__image-wrapper",children:Object(a.jsx)("img",{className:"lot-preview__image",src:t.imagePath,alt:"lot"})}),Object(a.jsxs)("div",{className:n.lotPreviewInfo,children:[Object(a.jsxs)("div",{className:"lot-preview__info-text-wrapper",children:[Object(a.jsxs)("div",{className:"lot-preview__title-wrapper",children:[Object(a.jsx)(i.c,{className:n.lotNameClasses,to:"/lots/".concat(t.id),tag:i.b,children:t.name}),t.isSold&&Object(a.jsx)("div",{className:"lot-preview__sold-lot-message",children:"Lot is sold!"})]}),Object(a.jsx)("div",{className:"lot-preview__description",children:t.description})]}),Object(a.jsx)("div",{className:"lot-preview__info-button-wrapper",children:Object(a.jsx)(i.b,{className:s,to:"/lots/".concat(t.id),tag:i.b,children:"Go to the lot page"})})]})]})}function De(e){for(var t=e.pageCount,n=[],r=Object(o.c)((function(e){return e.lotsInfo})),s=1;s<=t;s++)Math.abs(s-r.activePage<=5)&&n.push(Object(a.jsx)(i.c,{className:W()("pagination__link",{"pagination__link--active":r.activePage===s}),to:"/lots?page=".concat(s),children:s},s));return Object(a.jsxs)("div",{className:"pagination",children:[1!==r.activePage&&Object(a.jsx)(i.c,{className:"pagination__link",to:"/lots?page=".concat(r.activePage-1),tag:i.b,children:"\xab"}),n,r.activePage!==r.totalPages&&Object(a.jsx)(i.c,{className:"pagination__link",to:"/lots?page=".concat(r.activePage+1),tag:i.b,children:"\xbb"})]})}var Me=n(46),Fe={multiselectContainer:{margin:"0 1rem 1rem 1rem"},chips:{background:"#f2d400",color:"black",fontSize:"1rem",margin:"0 .3rem",padding:".5rem .7rem"},option:{background:"#f2d400",color:"black"}};function We(e,t){var n=[];return e&&n.push({name:"Show sold lots",id:1}),t&&n.push({name:"Show unsold lots",id:2}),n}function ze(e,t,n,a,r,s){e.current=!0,a(ke(n,t.some((function(e){return 1===e.id})),t.some((function(e){return 2===e.id})))),s(Object(oe.a)(Object(oe.a)({},r),{},{selectedValues:t}))}function Ve(e,t,n,r,s){return Object(a.jsx)(Me.Multiselect,{options:e.options,selectedValues:e.selectedValues,onSelect:function(a){return ze(t,a,n,r,e,s)},onRemove:function(a){return ze(t,a,n,r,e,s)},displayValue:"name",style:Fe})}function He(e){var t=e.page,n=Object(o.b)(),s=Object(o.c)((function(e){return e.lotsInfo})),c=Object(o.c)((function(e){return e.app.lotLoading})),i=Object(r.useState)({options:[{name:"Show sold lots",id:1},{name:"Show unsold lots",id:2}],selectedValues:[]}),u=Object(ee.a)(i,2),l=u[0],d=u[1],b=Object(r.useRef)(!1),j=W()("main","main__lot-preview-wrapper","container-border");Object(r.useEffect)((function(){var e=We(s.showSold,s.showUnsold);d(Object(oe.a)(Object(oe.a)({},l),{},{selectedValues:e}))}),[n]),Object(r.useEffect)((function(){n(ke(t,s.showSold,s.showUnsold))}),[n,t]);var p=Ve(l,b,t,n,d);return c?Object(a.jsx)(z,{}):b.current?(b.current=!1,Object(a.jsx)(h.a,{to:"/lots"})):!s.lots||s.lots&&!s.lots.length?Object(a.jsxs)("div",{className:j,children:[p,Object(a.jsx)("div",{className:"main__custom-message-page",children:"There are no lots on the server that meet the filtering conditions"})]}):Object(a.jsxs)("div",{className:j,children:[p,s.lots.map((function(e){return Object(a.jsx)(Te,{lot:e},e.id)})),Object(a.jsx)("div",{className:"main__pagination",children:Object(a.jsx)(De,{pageCount:s.totalPages})})]})}var Be={lotPreviewClasses:W()("main__lot-preview","main__admin-lot-preview","admin-lot-preview","container-border"),lotNameClasses:W()("lot-preview__name","admin-lot-preview__name","title"),minorButtonClasses:W()("button","admin-lot-preview__button","admin-lot-preview__minor-button"),majorButtonClasses:W()("button","admin-lot-preview__button","admin-lot-preview__major-button"),buttonClasses:W()("button","admin-lot-preview__button"),buttonSetNexLotClasses:W()("button","admin-lot-preview__button","admin-lot-preview__set-next-lot-button"),buttonWarningClasses:W()("button","admin-lot-preview__button","button--warning","admin-lot-preview__minor-button"),inputClasses:W()("form-item__input","container-border","admin-lot-preview__input"),setNextLotInputClasses:W()("form-item__input","container-border","admin-lot-preview__input","admin-lot-preview__set-next-lot-input"),lotPreviewInfo:W()("admin-lot-preview__info","lot-preview__info","info"),titleWrapperClasses:W()("lot-preview__title-wrapper","admin-lot-preview__title-wrapper"),descriptionClasses:W()("admin-lot-preview__description","lot-preview__description")},Ye=function(e,t,n){try{e(function(e){return function(){var t=Object(O.a)(m.a.mark((function t(n){var a,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T.getAccessToken();case 2:return a=t.sent,t.next=5,fetch("".concat(ae,"/").concat(e),{method:"DELETE",headers:a?{Authorization:"Bearer ".concat(a)}:{}});case 5:if(!(r=t.sent).ok){t.next=10;break}n({type:me,payload:{id:e}}),t.next=15;break;case 10:return t.t0=Error,t.next=13,r.text();case 13:throw t.t1=t.sent,new t.t0(t.t1);case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t)),n({message:"Lot was successfully deleted",successed:!0})}catch(a){n({message:a.message,successed:!1})}};function Je(e,t,n,a){return Ge.apply(this,arguments)}function Ge(){return(Ge=Object(O.a)(m.a.mark((function e(t,n,a,r){var s,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(ae,"?page=").concat(n,"&showSold=").concat(a,"&showUnsold=").concat(r));case 2:if(!(s=e.sent).ok){e.next=8;break}return e.next=6,s.json();case 6:return c=e.sent,e.abrupt("return",c);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qe(e){var t=e.page,n=e.pageCount,r=e.setDropDown;return Object(a.jsx)("div",{className:"main__dropDownPagination",children:Object(a.jsxs)("div",{className:"pagination",children:[1!==t&&Object(a.jsx)("button",{className:"pagination__link",onClick:function(){return Je(r,t-1,!0,!0,!0)},children:"\xab"}),t!==n&&Object(a.jsx)("button",{className:"pagination__link",onClick:function(){return Je(r,t+1,!0,!0,!0)},children:"\xbb"})]})})}var Ze=function(){var e=Object(O.a)(m.a.mark((function e(t,n,a,r,s){var c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.isSold||t.isActive){e.next=11;break}if(!n.id){e.next=9;break}return e.next=4,T.getAccessToken();case 4:return c=e.sent,e.next=7,fetch(ae,{method:"PATCH",headers:c?{Accept:"*/*",Authorization:"Bearer ".concat(c)}:{},body:JSON.stringify({lotId:t.id,previousLotId:n.id})});case 7:e.sent.ok?a({successed:!0,message:"Next Lot Id was successfully added!"}):a({successed:!1,message:"Id wasn't added, error!"});case 9:e.next=12;break;case 11:a({successed:!1,message:"Lot is sold!"});case 12:s(Object(oe.a)(Object(oe.a)({},r),{},{selected:null,isOpen:!1}));case 13:case"end":return e.stop()}}),e)})));return function(t,n,a,r,s){return e.apply(this,arguments)}}();function Ke(e){var t=e.currentLot,n=e.setOperationResult,s=Object(r.useState)({isOpen:!1,page:1,pageCount:0,selected:null,lots:[]}),c=Object(ee.a)(s,2),i=c[0],o=c[1],u=Object(r.useMemo)((function(){return{buttonNextLotClasses:W()("button","admin-lot-preview__button","admin-lot-preview__major-button","dropDownLots__button","container-border"),dropDownContentClasses:W()("dropDownLots__content","container-border"),buttonWrapperClasses:W()("admin-lot-preview__major-button","dropDownLots__button-wrapper"),buttonClasses:W()("button","admin-lot-preview__button","dropDownLots__set-button")}}),[]);Object(r.useEffect)((function(){Je(o,i.page,!0,!0).then((function(e){e&&o({lots:e.lots,page:i.page,pageCount:e.pagesCount,isOpen:i.isOpen})}))}),[]);var l=i&&i.lots?i.lots.map((function(e){return e.id!==t.id&&!e.isSold&&!e.isActive&&Object(a.jsxs)("button",{onClick:function(){return o(Object(oe.a)(Object(oe.a)({},i),{},{selected:e,isOpen:!1}))},className:"dropDownLots__item",children:[e.name," [ID: ",e.id,"]"]},e.id)})):Object(a.jsx)("div",{className:"dropDownLots__item",children:"No lots!"}),d=i&&i.selected?"".concat(i.selected.name," [ID: ").concat(i.selected.id,"]"):"Start After...";return Object(a.jsxs)("div",{className:"main__dropDownLots",children:[Object(a.jsxs)("div",{className:u.buttonWrapperClasses,children:[Object(a.jsx)("button",{className:u.buttonNextLotClasses,onClick:function(){return o(Object(oe.a)(Object(oe.a)({},i),{},{isOpen:!i.isOpen}))},children:d}),i.isOpen&&Object(a.jsxs)("div",{className:u.dropDownContentClasses,children:[l,Object(a.jsx)(qe,{page:i.page,pageCount:i.pageCount,setDropDown:o})]})]}),Object(a.jsx)("button",{className:u.buttonClasses,onClick:function(){return Ze(t,i.selected,n,i,o)},children:"Set"})]})}function Qe(e){var t=e.lot,n=e.connection,s=e.setOperationResult,c=e.page,u=Object(o.b)(),l=Object(r.useCallback)((function(e,t){if(e.isSold||e.isActive)t({message:"The lot has already been sold!",successed:!1});else{var n=(new Ae.a).withUrl(re).build();n.start().then((function(){n.invoke("StartLot","active",e.id),t({message:"Lot started successfully!",successed:!0})}))}}),[]),d=Object(r.useCallback)((function(e,t,n){Ye(t,e,s),t(ke(n,!0,!0))}),[s]);return Object(a.jsxs)("div",{className:Be.lotPreviewClasses,children:[Object(a.jsx)("div",{className:"admin-lot-preview__image-wrapper",children:Object(a.jsx)("img",{className:"lot-preview__image",src:t.imagePath,alt:"lot"})}),Object(a.jsxs)("div",{className:Be.lotPreviewInfo,children:[Object(a.jsxs)("div",{className:"lot-preview__info-text-wrapper",children:[Object(a.jsxs)("div",{className:Be.titleWrapperClasses,children:[Object(a.jsxs)(i.c,{className:Be.lotNameClasses,to:"/lots/".concat(t.id),tag:i.b,children:[t.name," [ID:",t.id,"]"]}),t.isSold&&Object(a.jsx)("div",{className:"lot-preview__sold-lot-message",children:"Lot is sold!"})]}),Object(a.jsx)("div",{className:Be.descriptionClasses,children:t.description})]}),Object(a.jsxs)("div",{className:"admin-lot-preview__buttons-wrapper",children:[Object(a.jsx)("button",{className:Be.minorButtonClasses,disabled:!n,onClick:function(){return l(t,s)},children:"Start Lot"}),Object(a.jsx)("button",{className:Be.buttonWarningClasses,onClick:function(){return d(t.id,u,c)},children:"Delete lot"}),Object(a.jsx)(Ke,{currentLot:t,setOperationResult:s}),Object(a.jsx)("div",{className:"admin-lot-preview__major-button",children:Object(a.jsx)(i.b,{className:Be.buttonClasses,to:"/lots/".concat(t.id),tag:i.b,children:"Go to the lot page"})})]})]})]})}function Xe(e){var t=e.successed,n=e.message,s=Object(r.useMemo)((function(){return W()("result-block",{"result-block--error":!t})}),[t]);return n?Object(a.jsx)("p",{className:s,children:n}):""}function $e(e){var t=e.page,n=Object(o.b)(),s=Object(o.c)((function(e){return e.lotsInfo})),c=Object(o.c)((function(e){return e.app.lotLoading})),i=Object(r.useState)({message:"",successed:!0}),u=Object(ee.a)(i,2),l=u[0],d=u[1],b=Object(r.useState)({options:[{name:"Show sold lots",id:1},{name:"Show unsold lots",id:2}],selectedValues:[]}),j=Object(ee.a)(b,2),p=j[0],f=j[1],m=Object(r.useRef)(!1),O=W()("main","main__admin-lot-preview-wrapper","container-border");Object(r.useEffect)((function(){var e=We(s.showSold,s.showUnsold);f(Object(oe.a)(Object(oe.a)({},p),{},{selectedValues:e}))}),[n]),Object(r.useEffect)((function(){n(ke(t,s.showSold,s.showUnsold))}),[n,t]);var v=Object(r.useState)(null),g=Object(ee.a)(v,2),x=g[0],_=g[1];Object(r.useEffect)((function(){var e=(new Ae.a).withUrl(re).build();e.start().then((function(){_(e)}))}),[]);var w=Ve(p,m,t,n,f);return c?Object(a.jsx)(z,{}):s.lots?m.current?(m.current=!1,Object(a.jsx)(h.a,{to:"/lots"})):s.lots.length?Object(a.jsxs)("div",{className:O,children:[w,Object(a.jsx)(Xe,{successed:l.successed,message:l.message}),s.lots.map((function(e){return Object(a.jsx)(Qe,{lot:e,connection:x,setOperationResult:d,page:t},e.id)})),Object(a.jsx)("div",{className:"main__pagination",children:Object(a.jsx)(De,{pageCount:s.totalPages})})]}):1!==t?Object(a.jsx)(h.a,{to:"/lots?".concat(t-1)}):Object(a.jsxs)("div",{className:O,children:[w,Object(a.jsx)("div",{className:"main__custom-message-page",children:"There are no lots on the server that meet the filtering conditions"})]}):Object(a.jsx)(H,{message:"Error"})}function et(e){var t,n=Object(r.useState)(null),s=Object(ee.a)(n,2),c=s[0],i=s[1],o=e.match.params.id,u=e.location.search.match(/\?page=(\d)/);u&&u[1]&&(t=+u[1]);var l=Object(r.useCallback)(function(){var e=Object(O.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.hasRole(R);case 2:n=e.sent,t(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]);if(Object(r.useEffect)((function(){var e=T.subscribe((function(){return l(i)}));return l(i),function(){T.unsubscribe(e)}}),[l]),o)return Object(a.jsx)(Ee,{id:o});if(null===c)return Object(a.jsx)(z,{});if(c){if(t&&!isNaN(t))return Object(a.jsx)($e,{page:t});if(!t)return Object(a.jsx)($e,{page:1})}else{if(t&&!isNaN(t))return Object(a.jsx)(He,{page:t});if(!o&&!t)return Object(a.jsx)(He,{page:1})}}function tt(e){var t=e.errors;return t&&t.length>0?t.map((function(e,t){return Object(a.jsx)("p",{className:"form-item__error",children:e},t)})):""}var nt=n(31);function at(e){var t=e.labelText,n=e.type,s=e.checkingFunctions,c=e.state,i=e.setState,o=Object(r.useMemo)((function(){return{formClasses:W()("add-lot__item","form-item"),inputClasses:W()("form-item__input","container-border",{"form-item__input--error":0!==c.errors.length})}}),[c]),u=Object(r.useCallback)((function(e){var t,n=[],a=Object(nt.a)(s());try{for(a.s();!(t=a.n()).done;){var r=(0,t.value)(e.target.value);r&&n.push(r)}}catch(c){a.e(c)}finally{a.f()}i({value:e.target.value,errors:n})}),[s,i]);return Object(a.jsxs)("div",{className:o.formClasses,children:[Object(a.jsx)("label",{className:"form-item__label",children:t}),Object(a.jsx)(tt,{errors:c.errors}),Object(a.jsx)("input",{className:o.inputClasses,value:c.value,onChange:function(e){return i({value:e.target.value,errors:[]})},onBlur:u,type:n,required:!0})]})}var rt=function(){var e=[];return e.push((function(e){if(e.length<=20)return"Description length can't be shorter then ".concat(20)})),e},st=function(){var e=[];return e.push((function(e){if(!e)return"Name can't be empty!"})),e},ct=function(){var e=[];return e.push((function(e){if(isNaN(+e)||e<0)return"Invalid price!"})),e},it=function(){var e=[];return e.push((function(e){if(isNaN(+e))return"Invalid duration!"})),e.push((function(e){if(+e<10)return"Duration is too small"})),e.push((function(e){if(+e>86400)return"Duration is too big!"})),e};function ot(e,t,n){return ut.apply(this,arguments)}function ut(){return(ut=Object(O.a)(m.a.mark((function e(t,n,a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(ae,{method:"POST",headers:t?{Accept:"*/*",Authorization:"Bearer ".concat(t)}:{},body:n});case 2:e.sent.ok?a({successed:!0,message:"Lot was successfully added!"}):a({successed:!1,message:"Lot wasn't added. Check your image for validity"});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var lt={mainClasses:W()("main","container","container-border","add-lot"),titleClasses:W()("title","title--center"),buttonClasses:W()("button","form-item__button"),buttonWrapperClasses:W()("add-lot__item","form-item","form-item__buttons-wrapper")};var dt=function(e,t,n){!function(e,t){var n=new FileReader;n.readAsDataURL(e),n.onload=function(e){var n=new Image;n.src=e.target.result,n.onload=function(){t(this.height<=this.width)}}}(e.target.files[0],(function(a){a?(t(e.target.files[0]),n([])):n(["Image size is invalid!"])}))},bt=function(e){var t,n=Object(nt.a)(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(a.length||a.errors&&a.errors.length)return!0}}catch(r){n.e(r)}finally{n.f()}return!1};function jt(){var e=Object(r.useState)({name:""}),t=Object(ee.a)(e,2),n=t[0],s=t[1],c=Object(r.useState)({message:"",successed:!0}),i=Object(ee.a)(c,2),o=i[0],u=i[1],l=Object(r.useState)({value:"",errors:[]}),d=Object(ee.a)(l,2),b=d[0],j=d[1],p=Object(r.useState)({value:"",errors:[]}),h=Object(ee.a)(p,2),f=h[0],v=h[1],g=Object(r.useState)({value:0,errors:[]}),x=Object(ee.a)(g,2),_=x[0],w=x[1],k=Object(r.useState)({value:0,errors:[]}),N=Object(ee.a)(k,2),y=N[0],C=N[1],S=Object(r.useState)([]),L=Object(ee.a)(S,2),A=L[0],U=L[1],I=Object(r.useCallback)(function(){var e=Object(O.a)(m.a.mark((function e(t,a,r,s){var c,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.getAccessToken();case 2:return c=e.sent,i=new FormData,n.name&&i.append("image",n,n.name),i.append("name",t),i.append("description",a),i.append("minPrice",r),i.append("duration",s),e.prev=9,e.next=12,ot(c,i,u);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(9),u({successed:!1,message:"An error occurred while adding a new lot!"});case 17:return e.prev=17,j({value:"",errors:[]}),v({value:"",errors:[]}),w({value:0,errors:[]}),C({value:0,errors:[]}),e.finish(17);case 23:case"end":return e.stop()}}),e,null,[[9,14,17,23]])})));return function(t,n,a,r){return e.apply(this,arguments)}}(),[n]);return Object(a.jsxs)("div",{className:lt.mainClasses,children:[Object(a.jsx)("h2",{className:lt.titleClasses,children:"Adding a new lot"}),Object(a.jsx)(Xe,{successed:o.successed,message:o.message}),Object(a.jsxs)("form",{className:"add-lot__form",onSubmit:function(e){e.preventDefault(),I(b.value,f.value,_.value,y.value)},children:[Object(a.jsx)(at,{labelText:"Name:",type:"text",checkingFunctions:st,state:b,setState:j}),Object(a.jsx)(at,{labelText:"Description:",type:"text",checkingFunctions:rt,state:f,setState:v}),Object(a.jsx)(at,{labelText:"Minimum price USD:",type:"number",checkingFunctions:ct,state:_,setState:w}),Object(a.jsx)(at,{labelText:"Duration, sec:",type:"number",checkingFunctions:it,state:y,setState:C}),Object(a.jsxs)("div",{className:lt.buttonWrapperClasses,children:[Object(a.jsx)("div",{className:"form-item__error-wrapper",children:Object(a.jsx)(tt,{errors:A})}),Object(a.jsx)("label",{className:lt.buttonClasses,htmlFor:"choose-file-input",children:n.name||"Choose File..."}),Object(a.jsx)("input",{className:"form-item__file-choose",type:"file",onChange:function(e){return dt(e,s,U)},id:"choose-file-input"})]}),Object(a.jsx)("div",{className:lt.buttonWrapperClasses,children:Object(a.jsx)("button",{disabled:bt([b,f,_,y,A]),type:"submit",className:lt.buttonClasses,children:"Upload"})})]})]})}function pt(){var e=Object(r.useState)(null),t=Object(ee.a)(e,2),n=t[0],s=t[1],c=Object(r.useCallback)(function(){var e=Object(O.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.hasRole(R);case 2:n=e.sent,t(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]);return Object(r.useEffect)((function(){var e=T.subscribe((function(){return c(s)}));return c(s),function(){T.unsubscribe(e)}}),[c]),n?Object(a.jsx)("div",{children:Object(a.jsx)(jt,{})}):!1===n?Object(a.jsx)(H,{message:"You dont have access to this component!"}):Object(a.jsx)(z,{})}function ht(){var e=Object(r.useState)([]),t=Object(ee.a)(e,2),n=t[0],s=t[1],c=Object(o.b)(),u=Object(o.c)((function(e){return e.app.winnersLoading})),l=Object(r.useCallback)(Object(O.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c({type:ge}),e.next=3,fetch("api/winners");case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,c({type:xe}),s(n);case 9:case"end":return e.stop()}}),e)}))),[c]);Object(r.useEffect)((function(){l()}),[]);var d=Object(r.useMemo)((function(){return{mainClasses:W()("main","container-border","main__winners"),tableClasses:W()("table")}}),[]);return u?Object(a.jsx)(z,{}):n.length?Object(a.jsx)("div",{className:d.mainClasses,children:Object(a.jsxs)("table",{className:d.tableClasses,children:[Object(a.jsx)("thead",{className:"table__header",children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{className:"table__header-item",children:"Lot ID"}),Object(a.jsx)("th",{className:"table__header-item",children:"Lot Name"}),Object(a.jsx)("th",{className:"table__header-item",children:"Winner Page"}),Object(a.jsx)("th",{className:"table__header-item",children:"Sold Price"})]})}),Object(a.jsx)("tbody",{className:"table__body",children:n.map((function(e){var t;return Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{className:"table__item",children:e.id}),Object(a.jsx)("th",{className:"table__item",children:e.lotName}),Object(a.jsx)("th",{className:"table__item",children:null!==(t=Object(a.jsx)(i.c,{className:d.lotNameClasses,to:"/users/".concat(e.userId),tag:i.b,children:e.ownerName}))&&void 0!==t?t:"-"}),Object(a.jsxs)("th",{className:"table__item",children:[e.priceUsd," USD"]})]},e.id)}))})]})}):Object(a.jsx)(H,{message:"No information about the lot winners!"})}function ft(e){var t=e.match.params.id,n=Object(r.useState)(null),s=Object(ee.a)(n,2),c=s[0],i=s[1],u=Object(r.useState)(null),l=Object(ee.a)(u,2),d=l[0],b=l[1],j=Object(o.b)(),p=Object(o.c)((function(e){return e.app.userLoading})),h=Object(r.useCallback)(function(){var e=Object(O.a)(m.a.mark((function e(t){var n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j({type:ge}),e.next=3,fetch("".concat("api/users","/").concat(t));case 3:if(!(n=e.sent).ok){e.next=11;break}return e.next=7,n.json();case 7:a=e.sent,i(a),e.next=12;break;case 11:b("Bad Request!");case 12:j({type:xe});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[j]);Object(r.useEffect)((function(){h(t)}),[t]);var f=Object(r.useMemo)((function(){return{mainClasses:W()("main","container-border","user-page"),tableClasses:W()("table","user-page__table")}}),[]);return p?Object(a.jsx)(z,{}):d?Object(a.jsx)(H,{message:d}):c?Object(a.jsxs)("div",{className:f.mainClasses,children:[Object(a.jsxs)("div",{className:"user-page__item",children:[Object(a.jsx)("span",{className:"user-page__item-name",children:"First Name:"})," ",c.firstName]}),Object(a.jsxs)("div",{className:"user-page__item",children:[Object(a.jsx)("span",{className:"user-page__item-name",children:"Last Name:"})," ",c.lastName]}),Object(a.jsxs)("div",{className:"user-page__item",children:[Object(a.jsx)("span",{className:"user-page__item-name",children:"ID:"})," ",c.id]}),Object(a.jsxs)("div",{className:"user-page__item",children:[Object(a.jsx)("span",{className:"user-page__item-name",children:"Email:"})," ",c.email]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("span",{className:"user-page__item-name",children:"Won Lots: "}),Object(a.jsxs)("table",{className:f.tableClasses,children:[Object(a.jsx)("thead",{className:"table__header",children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{className:"table__header-item",children:"Lot Name"}),Object(a.jsx)("th",{className:"table__header-item",children:"Sold Price"})]})}),Object(a.jsx)("tbody",{className:"table__body",children:c.winningLots.map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{className:"table__item",children:e.lotName}),Object(a.jsxs)("th",{className:"table__item",children:[e.priceUsd," USD"]})]},e.id)}))})]})]})]}):null}var mt=function(e){Object(j.a)(n,e);var t=Object(p.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){var e=W()("casing","casing__body");return Object(a.jsx)("div",{className:e,children:Object(a.jsxs)(ie,{className:"container",children:[Object(a.jsx)(h.b,{exact:!0,path:"/",component:et}),Object(a.jsx)(h.b,{exact:!0,path:"/users/:id",component:ft}),Object(a.jsx)(h.b,{path:"/lots/:id?",component:et}),Object(a.jsx)(h.b,{path:"/winners",component:ht}),Object(a.jsx)(le,{path:"/new-lot",component:pt}),Object(a.jsx)(h.b,{path:I.ApiAuthorizationPrefix,component:Y})]})})}}]),n}(r.Component);mt.displayName=mt.name;var Ot={lots:[],activePage:1,totalPages:0,showSold:!1,showUnsold:!0},vt={lotLoading:!1,winnersLoading:!1,userLoading:!1},gt=Object(u.c)({lotsInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ot,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case de:return Object(oe.a)(Object(oe.a)({},e),{},{lots:t.payload.lots,totalPages:t.payload.pagesCount,activePage:t.payload.activePage,showSold:t.payload.showSold,showUnsold:t.payload.showUnsold});case be:return Object(oe.a)(Object(oe.a)({},e),{},{lots:e.lots.concat(t.payload)});case je:return Object(oe.a)(Object(oe.a)({},e),{},{lots:e.lots.map((function(e){return e.id===t.payload.id?t.payload:e}))});case pe:return Object(oe.a)(Object(oe.a)({},e),{},{lots:e.lots.map((function(e){return e.id===t.payload.id?Object(oe.a)(Object(oe.a)({},e),{},{priceUsd:t.payload.price}):e}))});case he:return Object(oe.a)(Object(oe.a)({},e),{},{lots:e.lots.map((function(e){return e.id===t.payload.id?Object(oe.a)(Object(oe.a)({},e),{},{isActive:t.payload.isActive}):e}))});case fe:return Object(oe.a)(Object(oe.a)({},e),{},{lots:e.lots.map((function(e){return e.id===t.payload.id?Object(oe.a)(Object(oe.a)({},e),{},{isActive:!1,isSold:!0}):e}))});case me:return Object(oe.a)(Object(oe.a)({},e),{},{lots:e.lots.filter((function(e){return e.id!==t.payload.id}))});default:return e}},app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Oe:return Object(oe.a)(Object(oe.a)({},e),{},{lotLoading:!0});case ve:return Object(oe.a)(Object(oe.a)({},e),{},{lotLoading:!1});case ge:return Object(oe.a)(Object(oe.a)({},e),{},{winnersLoading:!0});case xe:return Object(oe.a)(Object(oe.a)({},e),{},{winnersLoading:!1});case _e:return Object(oe.a)(Object(oe.a)({},e),{},{userLoading:!0});case we:return Object(oe.a)(Object(oe.a)({},e),{},{userLoading:!1});default:return e}}}),xt=document.getElementsByTagName("base")[0].getAttribute("href"),_t=document.getElementById("root"),wt=Object(u.e)(gt,Object(u.d)(Object(u.a)(l.a)));c.a.render(Object(a.jsx)(o.a,{store:wt,children:Object(a.jsx)(i.a,{basename:xt,children:Object(a.jsx)(mt,{})})}),_t)}},[[68,1,2]]]);
//# sourceMappingURL=main.7edd391c.chunk.js.map