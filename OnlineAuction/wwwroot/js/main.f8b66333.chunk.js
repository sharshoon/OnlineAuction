(this.webpackJsonponlineauction=this.webpackJsonponlineauction||[]).push([[0],{41:function(e,t,n){},59:function(e,t,n){},65:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(1),s=n(28),c=n.n(s),i=n(14),o=n(11),u=n(25),l=n(44),d=n(15),b=n(16),h=n(20),j=n(19),p=n(9),f=n(3),m=n.n(f),v=n(7),O=n(8),g=n(36),x="OnlineAuction",_="returnUrl",w="message",k="logout-callback",y="logout",N="logged-out",C="login",S="login-callback",A="login-failed",I="profile",L="register",U="/authentication",P={DefaultLoginRedirectPath:"/",ApiAuthorizationClientConfigurationUrl:"/_configuration/".concat(x),ApiAuthorizationPrefix:U,Login:"".concat(U,"/").concat(C),LoginFailed:"".concat(U,"/").concat(A),LoginCallback:"".concat(U,"/").concat(S),Register:"".concat(U,"/").concat(L),Profile:"".concat(U,"/").concat(I),LogOut:"".concat(U,"/").concat(y),LoggedOut:"".concat(U,"/").concat(N),LogOutCallback:"".concat(U,"/").concat(k),IdentityRegisterPath:"/Identity/Account/Register",IdentityManagePath:"/Identity/Account/Manage"},R="admin",T="user";function E(){return Object(a.jsx)("div",{className:"loader"})}var M=n(4),D=n.n(M);function F(){var e=D()("main","main__loading-page","loading-page","container-border");return Object(a.jsx)("div",{className:e,children:Object(a.jsx)(E,{})})}var z=new(function(){function e(){Object(d.a)(this,e),this._callbacks=[],this._nextSubscriptionId=0,this._user=null,this._isAuthenticated=!1,this._popUpDisabled=!0}return Object(b.a)(e,[{key:"isAuthenticated",value:function(){var e=Object(v.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getUser();case 2:return t=e.sent,e.abrupt("return",!!t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getUser",value:function(){var e=Object(v.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._user||!this._user.profile){e.next=2;break}return e.abrupt("return",this._user.profile);case 2:return e.next=4,this.ensureUserManagerInitialized();case 4:return e.next=6,this.userManager.getUser();case 6:return t=e.sent,e.abrupt("return",t&&t.profile);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAccessToken",value:function(){var e=Object(v.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ensureUserManagerInitialized();case 2:return e.next=4,this.userManager.getUser();case 4:return t=e.sent,e.abrupt("return",t&&t.access_token);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"signIn",value:function(){var e=Object(v.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ensureUserManagerInitialized();case 2:return e.prev=2,e.next=5,this.userManager.signinRedirect(Object(O.a)({},this.createArguments(t)));case 5:return e.abrupt("return",this.redirect());case 8:return e.prev=8,e.t0=e.catch(2),console.log("Redirect authentication error: ",e.t0),e.abrupt("return",this.error(e.t0));case 12:case"end":return e.stop()}}),e,this,[[2,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"completeSignIn",value:function(){var e=Object(v.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.ensureUserManagerInitialized();case 3:return e.next=5,this.userManager.signinCallback(t);case 5:return n=e.sent,this.updateState(n),e.abrupt("return",this.success(n&&n.state));case 10:return e.prev=10,e.t0=e.catch(0),console.log("There was an error signing in: ",e.t0),e.abrupt("return",this.error("There was an error signing in."));case 14:case"end":return e.stop()}}),e,this,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=Object(v.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ensureUserManagerInitialized();case 2:if(e.prev=2,!this._popUpDisabled){e.next=5;break}throw new Error("Popup disabled. Change 'AuthorizeService.js:AuthorizeService._popupDisabled' to false to enable it.");case 5:return e.next=7,this.userManager.signoutPopup(this.createArguments());case 7:return this.updateState(void 0),e.abrupt("return",this.success(t));case 11:return e.prev=11,e.t0=e.catch(2),console.log("Popup signout error: ",e.t0),e.prev=14,e.next=17,this.userManager.signoutRedirect(this.createArguments(t));case 17:return e.abrupt("return",this.redirect());case 20:return e.prev=20,e.t1=e.catch(14),console.log("Redirect signout error: ",e.t1),e.abrupt("return",this.error(e.t1));case 24:case"end":return e.stop()}}),e,this,[[2,11],[14,20]])})));return function(t){return e.apply(this,arguments)}}()},{key:"completeSignOut",value:function(){var e=Object(v.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ensureUserManagerInitialized();case 2:return e.prev=2,e.next=5,this.userManager.signoutCallback(t);case 5:return n=e.sent,this.updateState(null),e.abrupt("return",this.success(n&&n.data));case 10:return e.prev=10,e.t0=e.catch(2),console.log("There was an error trying to log out '".concat(e.t0,"'.")),e.abrupt("return",this.error(e.t0));case 14:case"end":return e.stop()}}),e,this,[[2,10]])})));return function(t){return e.apply(this,arguments)}}()},{key:"updateState",value:function(e){this._user=e,this._isAuthenticated=!!this._user,this.notifySubscribers()}},{key:"subscribe",value:function(e){return this._callbacks.push({callback:e,subscription:this._nextSubscriptionId++}),this._nextSubscriptionId-1}},{key:"unsubscribe",value:function(e){var t=this._callbacks.map((function(t,n){return t.subscription===e?{found:!0,index:n}:{found:!1}})).filter((function(e){return!0===e.found}));if(1!==t.length)throw new Error("Found an invalid number of subscriptions ".concat(t.length));this._callbacks.splice(t[0].index,1)}},{key:"notifySubscribers",value:function(){for(var e=0;e<this._callbacks.length;e++){(0,this._callbacks[e].callback)()}}},{key:"createArguments",value:function(e){return{useReplaceToNavigate:!0,data:e}}},{key:"error",value:function(e){return{status:H.Fail,message:e}}},{key:"success",value:function(e){return{status:H.Success,state:e}}},{key:"redirect",value:function(){return{status:H.Redirect}}},{key:"ensureUserManagerInitialized",value:function(){var e=Object(v.a)(m.a.mark((function e(){var t,n,a=this;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===this.userManager){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,fetch(P.ApiAuthorizationClientConfigurationUrl);case 4:if((t=e.sent).ok){e.next=7;break}throw new Error("Could not load settings for '".concat(x,"'"));case 7:return e.next=9,t.json();case 9:(n=e.sent).automaticSilentRenew=!0,n.includeIdTokenInSilentRenew=!0,n.userStore=new g.WebStorageStateStore({prefix:x}),this.userManager=new g.UserManager(n),this.userManager.events.addUserSignedOut(Object(v.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.userManager.removeUser();case 2:a.updateState(void 0);case 3:case"end":return e.stop()}}),e)}))));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"hasRole",value:function(){var e=Object(v.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getUser();case 2:if(!(n=e.sent)){e.next=11;break}if(!(n.role instanceof Array)){e.next=8;break}return e.abrupt("return",n.role.includes(t));case 8:return e.abrupt("return",n.role===t);case 9:e.next=12;break;case 11:return e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"instance",get:function(){return z}}]),e}()),W=z,H={Redirect:"redirect",Success:"success",Fail:"fail"};function B(){return"Login Page"}var Y=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={message:void 0},a}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.action;switch(e){case C:this.login("/");break;case S:this.processLoginCallback();break;case A:var t=new URLSearchParams(window.location.search).get(w);this.setState({message:t});break;case I:this.redirectToProfile();break;case L:this.redirectToRegister();break;default:throw new Error("Invalid action '".concat(e,"'"))}}},{key:"render",value:function(){var e=this.props.action,t=this.state.message;if(t)return Object(a.jsx)("div",{children:t});switch(e){case C:case S:return Object(a.jsx)(F,{});case I:case L:return Object(a.jsx)(F,{});default:throw new Error("Invalid action '".concat(e,"'"))}}},{key:"login",value:function(){var e=Object(v.a)(m.a.mark((function e(t){var n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={returnUrl:t},e.next=3,W.signIn(n);case 3:a=e.sent,e.t0=a.status,e.next=e.t0===H.Redirect?7:e.t0===H.Success?8:e.t0===H.Fail?11:13;break;case 7:return e.abrupt("break",14);case 8:return e.next=10,this.navigateToReturnUrl(t);case 10:return e.abrupt("break",14);case 11:return this.setState({message:a.message}),e.abrupt("break",14);case 13:throw new Error("Invalid status result ".concat(a.status,"."));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"processLoginCallback",value:function(){var e=Object(v.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.location.href,e.next=3,W.completeSignIn(t);case 3:n=e.sent,e.t0=n.status,e.next=e.t0===H.Redirect?7:e.t0===H.Success?8:e.t0===H.Fail?11:13;break;case 7:throw new Error("Should not redirect.");case 8:return e.next=10,this.navigateToReturnUrl(this.getReturnUrl(n.state));case 10:return e.abrupt("break",14);case 11:return this.setState({message:n.message}),e.abrupt("break",14);case 13:throw new Error("Invalid authentication result status '".concat(n.status,"'."));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getReturnUrl",value:function(e){var t=new URLSearchParams(window.location.search).get(_);if(t&&!t.startsWith("".concat(window.location.origin,"/")))throw new Error("Invalid return url. The return url needs to have the same origin as the current page.");return e&&e.returnUrl||t||"".concat(window.location.origin,"/")}},{key:"redirectToRegister",value:function(){this.redirectToApiAuthorizationPath("".concat(P.IdentityRegisterPath,"?").concat(_,"=").concat(encodeURI(P.Login)))}},{key:"redirectToProfile",value:function(){this.redirectToApiAuthorizationPath(P.IdentityManagePath)}},{key:"redirectToApiAuthorizationPath",value:function(e){var t="".concat(window.location.origin).concat(e);window.location.replace(t)}},{key:"navigateToReturnUrl",value:function(e){window.location.replace(e)}}]),n}(r.Component);function V(e){var t=e.message,n=Object(r.useMemo)((function(){return D()("main","main__custom-message-page","container-border")}),[]);return Object(a.jsx)("div",{className:n,children:t})}var J=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={message:void 0,isReady:!1,authenticated:!1},a}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.action;switch(e){case y:window.history.state.state.local?this.logout(this.getReturnUrl()):this.setState({isReady:!0,message:"The logout was not initiated from within the page."});break;case k:this.processLogoutCallback();break;case N:this.setState({isReady:!0,message:"You successfully logged out!"});break;default:throw new Error("Invalid action '".concat(e,"'"))}this.populateAuthenticationState()}},{key:"render",value:function(){var e=this.state,t=e.isReady,n=e.message;if(!t)return Object(a.jsx)("div",{});if(n)return Object(a.jsx)(V,{message:n});var r=this.props.action;switch(r){case y:case k:return Object(a.jsx)(F,{});case N:return Object(a.jsx)("div",{children:n});default:throw new Error("Invalid action '".concat(r,"'"))}}},{key:"logout",value:function(){var e=Object(v.a)(m.a.mark((function e(t){var n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={returnUrl:t},e.next=3,W.isAuthenticated();case 3:if(!e.sent){e.next=20;break}return e.next=7,W.signOut(n);case 7:a=e.sent,e.t0=a.status,e.next=e.t0===H.Redirect?11:e.t0===H.Success?12:e.t0===H.Fail?15:17;break;case 11:return e.abrupt("break",18);case 12:return e.next=14,this.navigateToReturnUrl(t);case 14:return e.abrupt("break",18);case 15:return this.setState({message:a.message}),e.abrupt("break",18);case 17:throw new Error("Invalid authentication result status.");case 18:e.next=21;break;case 20:this.setState({message:"You successfully logged out!"});case 21:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"processLogoutCallback",value:function(){var e=Object(v.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.location.href,e.next=3,W.completeSignOut(t);case 3:n=e.sent,e.t0=n.status,e.next=e.t0===H.Redirect?7:e.t0===H.Success?8:e.t0===H.Fail?11:13;break;case 7:throw new Error("Should not redirect.");case 8:return e.next=10,this.navigateToReturnUrl(this.getReturnUrl(n.state));case 10:return e.abrupt("break",14);case 11:return this.setState({message:n.message}),e.abrupt("break",14);case 13:throw new Error("Invalid authentication result status.");case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"populateAuthenticationState",value:function(){var e=Object(v.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.isAuthenticated();case 2:t=e.sent,this.setState({isReady:!0,authenticated:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getReturnUrl",value:function(e){var t=new URLSearchParams(window.location.search).get(_);if(t&&!t.startsWith("".concat(window.location.origin,"/")))throw new Error("Invalid return url. The return url needs to have the same origin as the current page.");return e&&e.returnUrl||t||"".concat(window.location.origin).concat(P.LoggedOut)}},{key:"navigateToReturnUrl",value:function(e){return window.location.replace(e)}}]),n}(r.Component),G=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){return Object(a.jsxs)(r.Fragment,{children:[Object(a.jsx)(p.b,{path:P.Login,render:function(){return q(C)}}),Object(a.jsx)(p.b,{path:P.LoginFailed,render:function(){return q(A)}}),Object(a.jsx)(p.b,{path:P.LoginCallback,render:function(){return q(S)}}),Object(a.jsx)(p.b,{path:P.Profile,render:function(){return q(I)}}),Object(a.jsx)(p.b,{path:P.Register,render:function(){return q(L)}}),Object(a.jsx)(p.b,{path:P.LogOut,render:function(){return Z(y)}}),Object(a.jsx)(p.b,{path:P.LogOutCallback,render:function(){return Z(k)}}),Object(a.jsx)(p.b,{path:P.LoggedOut,render:function(){return Z(N)}})]})}}]),n}(r.Component);function q(e){return Object(a.jsx)(Y,{action:e})}function Z(e){return Object(a.jsx)(J,{action:e})}var K=n(68),Q=n(29),X=n(67),$=n(69),ee=n(66),te=n(70),ne=n(12),ae=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={isAuthenticated:!1,userName:null},a}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=this;this._subscription=W.subscribe((function(){return e.populateState()})),this.populateState()}},{key:"componentWillUnmount",value:function(){W.unsubscribe(this._subscription)}},{key:"populateState",value:function(){var e=Object(v.a)(m.a.mark((function e(){var t,n,a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([W.isAuthenticated(),W.getUser()]);case 2:t=e.sent,n=Object(ne.a)(t,2),a=n[0],r=n[1],this.setState({isAuthenticated:a,userName:r&&r.name});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.isAuthenticated,n=e.userName;if(t){var a="".concat(P.Profile),r={pathname:"".concat(P.LogOut),state:{local:!0}};return this.authenticatedView(n,a,r)}var s="".concat(P.Register),c="".concat(P.Login);return this.anonymousView(s,c)}},{key:"authenticatedView",value:function(e,t,n){return Object(a.jsxs)(r.Fragment,{children:[Object(a.jsx)(ee.a,{children:Object(a.jsx)(te.a,{className:"header__button",tag:i.b,to:t,children:"Profile"})}),Object(a.jsx)(ee.a,{children:Object(a.jsx)(te.a,{className:"header__button",tag:i.b,to:n,children:"Logout"})})]})}},{key:"anonymousView",value:function(e,t){return Object(a.jsxs)(r.Fragment,{children:[Object(a.jsx)(ee.a,{children:Object(a.jsx)(te.a,{tag:i.b,className:"header__button",to:e,children:"Register"})}),Object(a.jsx)(ee.a,{children:Object(a.jsx)(te.a,{tag:i.b,className:"header__button",to:t,children:"Login"})})]})}}]),n}(r.Component),re=(n(59),n(41),function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={collapsed:!0,isAdmin:!1,role:"none"},a.titleClasses=D()("title","logo"),a.headerClasses=D()("casing__header","header","container-border"),a.toggleNavbar=a.toggleNavbar.bind(Object(Q.a)(a)),a}return Object(b.a)(n,[{key:"toggleNavbar",value:function(){this.setState({collapsed:!this.state.collapsed})}},{key:"componentDidMount",value:function(){var e=this;W.subscribe((function(){return e.isAdmin()})),this.isAdmin()}},{key:"isAdmin",value:function(){var e=Object(v.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.hasRole(R);case 2:t=e.sent,this.setState({isAdmin:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return this.buttonsWrapperClasses=D()("header__buttons-wrapper",{"header__buttons-wrapper--open":!this.state.collapsed}),Object(a.jsx)("header",{children:Object(a.jsx)(X.a,{children:Object(a.jsxs)(K.a,{className:this.headerClasses,children:[Object(a.jsxs)("div",{className:"header__logo",children:[Object(a.jsx)("h1",{className:"header__title",children:Object(a.jsx)($.a,{className:this.titleClasses,tag:i.b,to:"/",children:"Online Auction"})}),Object(a.jsx)("div",{className:"header__logo-description",children:"The biggest online auction platform in solar system!"})]}),Object(a.jsxs)("a",{className:"header__menu-button header__menu-button--hidden",onClick:function(){return e.toggleNavbar()},children:[Object(a.jsx)("div",{className:"menu-icon-bar"}),Object(a.jsx)("div",{className:"menu-icon-bar"}),Object(a.jsx)("div",{className:"menu-icon-bar"})]}),Object(a.jsxs)("ul",{className:this.buttonsWrapperClasses,children:[Object(a.jsx)(ee.a,{children:Object(a.jsx)(te.a,{className:"header__button",tag:i.b,to:"/",children:"Home"})}),this.state.isAdmin&&Object(a.jsx)(ee.a,{children:Object(a.jsx)(te.a,{className:"header__button",tag:i.b,to:"/new-lot",children:"New Lot"})}),this.state.isAdmin&&Object(a.jsx)(ee.a,{children:Object(a.jsx)(te.a,{className:"header__button",tag:i.b,to:"/admin-panel",children:"Admin Panel"})}),Object(a.jsx)(ee.a,{children:Object(a.jsx)(te.a,{className:"header__button",tag:i.b,to:"/winners",children:"Winners"})}),Object(a.jsx)(ae,{})]})]})})})}}]),n}(r.Component));re.displayName=re.name;var se="api/lots",ce="/lot-hub",ie="https://localhost:44390/api/images/icons";function oe(){var e=Object(r.useMemo)((function(){return{footerClasses:D()("casing__footer","footer","container-border"),cardNameClasses:D()("footer__card-name","title"),snInfoClasses:D()("footer__card-info","footer__sn-info")}}),[]);return Object(a.jsxs)("footer",{className:e.footerClasses,children:[Object(a.jsxs)("div",{className:"footer__card",children:[Object(a.jsx)("div",{className:e.cardNameClasses,children:"copyrights"}),Object(a.jsx)("div",{className:"footer__card-info",children:"@2020. Online Auction. All rights reserved"})]}),Object(a.jsxs)("div",{className:"footer__card",children:[Object(a.jsx)("div",{className:e.cardNameClasses,children:"connect me"}),Object(a.jsxs)("ul",{className:"footer__sn-wrapper",children:[Object(a.jsx)("li",{className:"footer__sn",children:Object(a.jsxs)("a",{className:"footer__sn-link",href:"mailto:Mickita.Sharshun@itechart-group.com",children:[Object(a.jsx)("img",{className:"footer__sn-icon",src:"".concat(ie,"/outlook-icon.png"),alt:"outlook"}),Object(a.jsx)("span",{className:e.snInfoClasses,children:"Outlook"})]})}),Object(a.jsx)("li",{className:"footer__sn",children:Object(a.jsxs)("a",{className:"footer__sn-link",href:"https://github.com/sharshoon",children:[Object(a.jsx)("img",{className:"footer__sn-icon",src:"".concat(ie,"/github-icon.png"),alt:"github"}),Object(a.jsx)("span",{className:e.snInfoClasses,children:"GitHub"})]})}),Object(a.jsx)("li",{className:"footer__sn",children:Object(a.jsxs)("a",{className:"footer__sn-link",href:"https://join.skype.com/invite/b4dT1glZDPZ4",children:[Object(a.jsx)("img",{className:"footer__sn-icon",src:"".concat(ie,"/skype-icon.png"),alt:"skype"}),Object(a.jsx)("span",{className:e.snInfoClasses,children:"Skype"})]})})]})]})]})}function ue(e){return Object(a.jsxs)("div",{children:[Object(a.jsx)(re,{}),Object(a.jsx)(K.a,{children:e.children}),Object(a.jsx)(oe,{})]})}function le(e){var t=e.lot,n=Object(r.useMemo)((function(){return{lotPreviewClasses:D()("main__lot-preview","lot-preview","container-border"),lotPreviewInfo:D()("lot-preview__info","info"),lotNameClasses:D()("lot-preview__name title")}}),[]),s=Object(r.useMemo)((function(){return D()("button","lot-preview__button")}),[]);return Object(a.jsxs)("div",{className:n.lotPreviewClasses,children:[Object(a.jsx)("div",{className:"lot-preview__image-wrapper",children:Object(a.jsx)("img",{className:"lot-preview__image",src:t.imagePath,alt:"lot"})}),Object(a.jsxs)("div",{className:n.lotPreviewInfo,children:[Object(a.jsxs)("div",{className:"lot-preview__info-text-wrapper",children:[Object(a.jsxs)("div",{className:"lot-preview__title-wrapper",children:[Object(a.jsx)(i.c,{className:n.lotNameClasses,to:"/lots/".concat(t.id),tag:i.b,children:t.name}),t.isSold&&Object(a.jsx)("div",{className:"lot-preview__sold-lot-message",children:"Lot is sold!"})]}),Object(a.jsx)("div",{className:"lot-preview__description",children:t.description})]}),Object(a.jsx)("div",{className:"lot-preview__info-button-wrapper",children:Object(a.jsx)(i.b,{className:s,to:"/lots/".concat(t.id),tag:i.b,children:"Go to the lot page"})})]})]})}var de="FETCH_LOTS",be="FETCH_LOT",he="UPDATE_LOT",je="UPDATE_LOT_PRICE",pe="UPDATE_LOT_ACTIVITY",fe="CLOSE_LOT",me="DELETE_LOT",ve="LOT/SHOW_LOADER",Oe="LOT/HIDE_LOADER",ge="WINNERS/SHOW_LOADER",xe="WINNERS/HIDE_LOADER";function _e(e,t){return function(){var n=Object(v.a)(m.a.mark((function n(a){var r,s;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a(ke()),n.next=3,fetch("".concat(se,"?page=").concat(e,"&onlyUnsold=").concat(t));case 3:return r=n.sent,n.next=6,r.json();case 6:s=n.sent,a({type:de,payload:Object(O.a)(Object(O.a)({},s),{},{activePage:e,onlyUnsold:t})}),a(ye());case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}function we(e,t){return function(n){n({type:je,payload:{id:e,price:t}})}}function ke(){return{type:ve}}function ye(){return{type:Oe}}function Ne(e){for(var t=e.pageCount,n=[],r=Object(o.b)(),s=Object(o.c)((function(e){return e.lotsInfo})),c=function(e){n.push(Object(a.jsx)("button",{className:D()("pagination__link",{"pagination__link--active":s.activePage===e}),onClick:function(){return r(_e(e,s.onlyUnsold))},children:e},e))},i=1;i<=t;i++)c(i);return Object(a.jsxs)("div",{className:"pagination",children:[1!==s.activePage&&Object(a.jsx)("button",{className:"pagination__link",onClick:function(){return r(_e(s.activePage-1,s.onlyUnsold))},children:"\xab"}),n,s.activePage!==s.totalPages&&Object(a.jsx)("button",{className:"pagination__link",onClick:function(){return r(_e(s.activePage+1,s.onlyUnsold))},children:"\xbb"})]})}function Ce(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.lotsInfo.onlyUnsold}));return Object(a.jsx)("div",{className:"main__switcher-wrapper",children:Object(a.jsxs)("div",{className:"switcher",children:[Object(a.jsx)("input",{type:"checkbox",checked:!t,onChange:function(){return e(_e(1,!t))},className:"switcher__checkbox"}),Object(a.jsx)("div",{className:"switcher__knobs"}),Object(a.jsx)("div",{className:"switcher__layer"})]})})}function Se(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.lotsInfo})),n=Object(o.c)((function(e){return e.app.lotLoading})),s=D()("main","main__lot-preview-wrapper","container-border");return Object(r.useEffect)((function(){e(_e(1,t.onlyUnsold))}),[e]),n?Object(a.jsx)(F,{}):t.lots?t.lots&&!t.lots.length?Object(a.jsxs)("div",{className:s,children:[Object(a.jsx)(Ce,{}),Object(a.jsx)("div",{className:"main__custom-message-page",children:"There are no lots on the server"})]}):Object(a.jsxs)("div",{className:s,children:[Object(a.jsx)(Ce,{}),t.lots.map((function(e){return Object(a.jsx)(le,{lot:e},e.id)})),Object(a.jsx)("div",{className:"main__pagination",children:Object(a.jsx)(Ne,{pageCount:t.totalPages})})]}):Object(a.jsxs)("div",{className:s,children:[Object(a.jsx)(Ce,{}),Object(a.jsx)("div",{className:"main__custom-message-page",children:"Error"})]})}function Ae(){return Object(a.jsx)(Se,{})}var Ie=n(46),Le=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={ready:!1,authenticated:!1},a}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=this;this._subscription=W.subscribe((function(){return e.authenticationChanged()})),this.populateAuthenticationState()}},{key:"componentWillUnmount",value:function(){W.unsubscribe(this._subscription)}},{key:"render",value:function(){var e=this.state,t=e.ready,n=e.authenticated,r=document.createElement("a");r.href=this.props.path;var s="".concat(r.protocol,"//").concat(r.host).concat(r.pathname).concat(r.search).concat(r.hash),c="".concat(P.Login,"?").concat(_,"=").concat(encodeURI(s));if(t){var i=this.props,o=i.component,u=Object(Ie.a)(i,["component"]);return Object(a.jsx)(p.b,Object(O.a)(Object(O.a)({},u),{},{render:function(e){return n?Object(a.jsx)(o,Object(O.a)({},e)):Object(a.jsx)(p.a,{to:c})}}))}return Object(a.jsx)("div",{})}},{key:"populateAuthenticationState",value:function(){var e=Object(v.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.isAuthenticated();case 2:t=e.sent,this.setState({ready:!0,authenticated:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"authenticationChanged",value:function(){var e=Object(v.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({ready:!1,authenticated:!1}),e.next=3,this.populateAuthenticationState();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(r.Component),Ue=function(e,t,n){return Object(a.jsxs)("div",{className:n,children:[Object(a.jsx)("div",{className:"timer__time",children:t}),Object(a.jsx)("div",{children:e})]})},Pe=function(e){return e%3600/60|0},Re=n(24),Te=function(e,t){var n=(new Re.a).withUrl(ce).build();return n.on("ActivateLot",(function(n,a){t.id===parseInt(a)&&e(function(e){return function(t){t({type:he,payload:e})}}(Object(O.a)(Object(O.a)({},t),{},{isActive:"active"===n})))})),n.start(),n};function Ee(e){var t,n=e.lot,s=Object(r.useState)(0),c=Object(ne.a)(s,2),i=c[0],u=c[1],l=Object(r.useRef)(null),d=Object(r.useRef)(null),b=Object(r.useRef)(!1),h=Object(o.b)(),j=D()("timer__item",{"timer__item--translucent":!n.isActive}),p=D()("main__timer","timer");return Object(r.useEffect)((function(){return d.current=!0,n&&!l.current&&(l.current=Te(h,n),l.current.on("DecreaseTime",(function(e,t,a){d.current&&a===n.id&&(b.current||(b.current=!0,h(function(e,t){return function(n){n({type:pe,payload:{id:e,isActive:t}})}}(n.id,!0))),u(e),n.priceUsd!==t&&h(we(n.id,t)))})),l.current.on("Stop",(function(e){n.id===e&&h(function(e){return function(t){t({type:fe,payload:{id:e}})}}(n.id))}))),function(){return d.current=!1}}),[n,l]),n.isSold||!n.isActive?null:Object(a.jsxs)("div",{className:"main__timer-wrapper",children:[undefined,Object(a.jsxs)("div",{className:p,children:[Ue("hours",(t=i,t/3600|0),j),Ue("minutes",Pe(i),j),Ue("seconds",i%60|0,j)]})]})}function Me(e){var t=e.id,n=Object(o.b)(),s=Object(o.c)((function(e){return e.lotsInfo.lots.find((function(e){return e.id===parseInt(t)}))})),c=Object(r.useRef)(null),i=Object(r.useState)(!1),u=Object(ne.a)(i,2),l=u[0],d=u[1],b=Object(r.useCallback)(function(){var e=Object(v.a)(m.a.mark((function e(t){var a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,W.getAccessToken();case 3:if(null===(a=e.sent)){e.next=13;break}return c.current=(new Re.a).withUrl("/increase-price",{accessTokenFactory:function(){return a}}).build(),c.current.on("PriceUpdate",(function(e){var a=JSON.parse(e);a.lotId===t.id&&a.successed&&n(we(a.lotId,a.priceUsd))})),e.next=9,c.current.start();case 9:return e.next=11,W.hasRole(T);case 11:r=e.sent,d(r);case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),alert("error");case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}(),[n]);Object(r.useEffect)((function(){b(s)}),[b]);var h=Object(r.useCallback)((function(e,t){c.current&&c.current.invoke("IncreasePrice",t.id,parseInt(t.priceUsd)||parseInt(t.minPriceUsd),e)}),[]),j=Object(r.useMemo)((function(){return D()("button","lot-info__button")}),[]),p=Object(r.useCallback)((function(e,t){return Math.trunc(e+e*t/100)}),[]);return s.isSold||!s.isActive?null:Object(a.jsxs)("div",{children:[!l&&Object(a.jsx)("p",{className:"lot-info__error",children:"You cannot place bets as you are not a user"}),Object(a.jsxs)("div",{className:"lot-info__buttons",children:[Object(a.jsxs)("button",{className:j,disabled:!s.isActive||!l,onClick:function(){return h(5,s)},children:["+5% [",p(s.priceUsd||s.minPriceUsd,5),"]"]}),Object(a.jsxs)("button",{className:j,disabled:!s.isActive||!l,onClick:function(){return h(10,s)},children:["+10% [",p(s.priceUsd||s.minPriceUsd,10),"]"]}),Object(a.jsxs)("button",{className:j,disabled:!s.isActive||!l,onClick:function(){return h(20,s)},children:["+20% [",p(s.priceUsd||s.minPriceUsd,20),"]"]})]})]})}var De={soldLotClasses:D()("main__lot-message","main__lot-message--sold"),notActiveClasses:D()("main__lot-message","main__lot-message--not-active")};function Fe(e){var t=e.id,n=Object(o.b)(),s=Object(o.c)((function(e){return e.lotsInfo.lots.find((function(e){return e.id===parseInt(t)}))})),c=Object(o.c)((function(e){return e.app.lotLoading}));Object(r.useEffect)((function(){s||n(function(e){return function(){var t=Object(v.a)(m.a.mark((function t(n){var a,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(ke()),t.next=3,fetch("".concat(se,"/").concat(e));case 3:return a=t.sent,t.next=6,a.json();case 6:r=t.sent,n({type:be,payload:r}),n(ye());case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))}),[]);var i=Object(r.useMemo)((function(){return{titleClasses:D()("main__title","title"),lotInfoClasses:D()("main__lot-info","lot-info","info")}}),[]);return c?Object(a.jsx)(F,{}):s?Object(a.jsx)("div",{className:"main container-border",children:Object(a.jsxs)("div",{className:"main__lot-info-wrapper",children:[Object(a.jsxs)("div",{className:i.titleClasses,children:[s.name,s.isSold&&Object(a.jsx)("div",{className:De.soldLotClasses,children:"Lot is sold!"}),!s.isSold&&!s.isActive&&Object(a.jsx)("div",{className:De.notActiveClasses,children:"Lot is not active!"})]}),Object(a.jsx)("img",{className:"main__image",src:s.imagePath,alt:"lot"}),Object(a.jsxs)("div",{className:i.lotInfoClasses,children:[Object(a.jsxs)("div",{className:"lot-info__item",children:[Object(a.jsx)("span",{className:"lot-info__name",children:"Description: "}),Object(a.jsx)("span",{children:s.description})]}),Object(a.jsxs)("div",{className:"lot-info__item",children:[Object(a.jsx)("span",{className:"lot-info__name",children:"Price: "}),Object(a.jsxs)("span",{children:[s.priceUsd||s.minPriceUsd," USD"]})]}),Object(a.jsx)(Ee,{lot:s}),Object(a.jsx)(Me,{id:t})]})]})}):Object(a.jsx)(V,{message:"There is no such lot on the server"})}function ze(e){var t=e.match.params.id;return t?Object(a.jsx)(Fe,{id:t}):Object(a.jsx)(Se,{})}function We(e){var t=e.errors;return t&&t.length>0?t.map((function(e,t){return Object(a.jsx)("p",{className:"form-item__error",children:e},t)})):""}var He=n(30);function Be(e){var t=e.labelText,n=e.type,s=e.checkingFunctions,c=e.state,i=e.setState,o=Object(r.useMemo)((function(){return{formClasses:D()("add-lot__item","form-item"),inputClasses:D()("form-item__input","container-border",{"form-item__input--error":0!==c.errors.length})}}),[c]),u=Object(r.useCallback)((function(e){var t,n=[],a=Object(He.a)(s());try{for(a.s();!(t=a.n()).done;){var r=(0,t.value)(e.target.value);r&&n.push(r)}}catch(c){a.e(c)}finally{a.f()}i({value:e.target.value,errors:n})}),[s,i]);return Object(a.jsxs)("div",{className:o.formClasses,children:[Object(a.jsx)("label",{className:"form-item__label",children:t}),Object(a.jsx)(We,{errors:c.errors}),Object(a.jsx)("input",{className:o.inputClasses,value:c.value,onChange:function(e){return i({value:e.target.value,errors:[]})},onBlur:u,type:n,required:!0})]})}function Ye(e){var t=e.successed,n=e.message,s=Object(r.useMemo)((function(){return D()("result-block",{"result-block--error":!t})}),[t]);return n?Object(a.jsx)("p",{className:s,children:n}):""}var Ve=function(){var e=[];return e.push((function(e){if(e.length<=20)return"Description length can't be shorter then ".concat(20)})),e},Je=function(){var e=[];return e.push((function(e){if(!e)return"Name can't be empty!"})),e},Ge=function(){var e=[];return e.push((function(e){if(isNaN(+e)||e<0)return"Invalid price!"})),e},qe=function(){var e=[];return e.push((function(e){if(isNaN(+e))return"Invalid duration!"})),e.push((function(e){if(+e<10)return"Duration is too small"})),e.push((function(e){if(+e>86400)return"Duration is too big!"})),e};function Ze(e,t,n){return Ke.apply(this,arguments)}function Ke(){return(Ke=Object(v.a)(m.a.mark((function e(t,n,a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(se,{method:"POST",headers:t?{Accept:"*/*",Authorization:"Bearer ".concat(t)}:{},body:n});case 2:e.sent.ok?a({successed:!0,message:"Lot was successfully added!"}):a({successed:!1,message:"Lot wasn't added. Check your image for validity"});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Qe={mainClasses:D()("main","container","container-border","add-lot"),titleClasses:D()("title","title--center"),buttonClasses:D()("button","form-item__button"),buttonWrapperClasses:D()("add-lot__item","form-item","form-item__buttons-wrapper")};var Xe=function(e,t,n){!function(e,t){var n=new FileReader;n.readAsDataURL(e),n.onload=function(e){var n=new Image;n.src=e.target.result,n.onload=function(){t(this.height<=this.width)}}}(e.target.files[0],(function(a){a?(t(e.target.files[0]),n([])):n(["Image size is invalid!"])}))},$e=function(e){var t,n=Object(He.a)(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(a.length||a.errors&&a.errors.length)return!0}}catch(r){n.e(r)}finally{n.f()}return!1};function et(){var e=Object(r.useState)({name:""}),t=Object(ne.a)(e,2),n=t[0],s=t[1],c=Object(r.useState)({message:"",successed:!0}),i=Object(ne.a)(c,2),o=i[0],u=i[1],l=Object(r.useState)({value:"",errors:[]}),d=Object(ne.a)(l,2),b=d[0],h=d[1],j=Object(r.useState)({value:"",errors:[]}),p=Object(ne.a)(j,2),f=p[0],O=p[1],g=Object(r.useState)({value:0,errors:[]}),x=Object(ne.a)(g,2),_=x[0],w=x[1],k=Object(r.useState)({value:0,errors:[]}),y=Object(ne.a)(k,2),N=y[0],C=y[1],S=Object(r.useState)([]),A=Object(ne.a)(S,2),I=A[0],L=A[1],U=Object(r.useCallback)(function(){var e=Object(v.a)(m.a.mark((function e(t,a,r,s){var c,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.getAccessToken();case 2:return c=e.sent,i=new FormData,n.name&&i.append("image",n,n.name),i.append("name",t),i.append("description",a),i.append("minPrice",r),i.append("duration",s),e.prev=9,e.next=12,Ze(c,i,u);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(9),u({successed:!1,message:"An error occurred while adding a new lot!"});case 17:return e.prev=17,h({value:"",errors:[]}),O({value:"",errors:[]}),w({value:0,errors:[]}),C({value:0,errors:[]}),e.finish(17);case 23:case"end":return e.stop()}}),e,null,[[9,14,17,23]])})));return function(t,n,a,r){return e.apply(this,arguments)}}(),[n]);return Object(a.jsxs)("div",{className:Qe.mainClasses,children:[Object(a.jsx)("h2",{className:Qe.titleClasses,children:"Adding a new lot"}),Object(a.jsx)(Ye,{successed:o.successed,message:o.message}),Object(a.jsxs)("form",{className:"add-lot__form",onSubmit:function(e){e.preventDefault(),U(b.value,f.value,_.value,N.value)},children:[Object(a.jsx)(Be,{labelText:"Name:",type:"text",checkingFunctions:Je,state:b,setState:h}),Object(a.jsx)(Be,{labelText:"Description:",type:"text",checkingFunctions:Ve,state:f,setState:O}),Object(a.jsx)(Be,{labelText:"Minimum price USD:",type:"number",checkingFunctions:Ge,state:_,setState:w}),Object(a.jsx)(Be,{labelText:"Duration, sec:",type:"number",checkingFunctions:qe,state:N,setState:C}),Object(a.jsxs)("div",{className:Qe.buttonWrapperClasses,children:[Object(a.jsx)("div",{className:"form-item__error-wrapper",children:Object(a.jsx)(We,{errors:I})}),Object(a.jsx)("label",{className:Qe.buttonClasses,htmlFor:"choose-file-input",children:n.name||"Choose File..."}),Object(a.jsx)("input",{className:"form-item__file-choose",type:"file",onChange:function(e){return Xe(e,s,L)},id:"choose-file-input"})]}),Object(a.jsx)("div",{className:Qe.buttonWrapperClasses,children:Object(a.jsx)("button",{disabled:$e([b,f,_,N,I]),type:"submit",className:Qe.buttonClasses,children:"Upload"})})]})]})}function tt(){var e=Object(r.useState)(null),t=Object(ne.a)(e,2),n=t[0],s=t[1],c=Object(r.useCallback)(Object(v.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.hasRole(R);case 2:t=e.sent,s(t);case 4:case"end":return e.stop()}}),e)}))),[]);return Object(r.useEffect)((function(){W.subscribe((function(){return c()})),c()}),[c]),n?Object(a.jsx)("div",{children:Object(a.jsx)(et,{})}):!1===n?Object(a.jsx)(V,{message:"You dont have access to this component!"}):Object(a.jsx)(F,{})}var nt=function(){var e=Object(v.a)(m.a.mark((function e(t,n,a,r){var s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.lotId.toString()!==n.previousLotId.toString()||""===n.lotId){e.next=3;break}return a({successed:!1,message:"Cannot start this lot after itself!"}),e.abrupt("return");case 3:if(t.isSold||t.isActive){e.next=15;break}if(!n.lotId){e.next=14;break}return e.next=7,W.getAccessToken();case 7:return s=e.sent,e.next=10,fetch(se,{method:"PATCH",headers:s?{Accept:"*/*",Authorization:"Bearer ".concat(s)}:{},body:JSON.stringify(n)});case 10:e.sent.ok?a({successed:!0,message:"Next Lot Id was successfully added!"}):a({successed:!1,message:"Id wasn't added, error!"}),e.next=15;break;case 14:a({successed:!1,message:"Lot is sold!"});case 15:r({lotId:"",previousLotId:"",visible:!1});case 16:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),at={lotPreviewClasses:D()("main__lot-preview","main__admin-lot-preview","admin-lot-preview","container-border"),lotNameClasses:D()("lot-preview__name title"),buttonClasses:D()("button","admin-lot-preview__button"),buttonSetNexLotClasses:D()("button","admin-lot-preview__button","admin-lot-preview__set-next-lot-button"),buttonWarningClasses:D()("button","admin-lot-preview__button","button--warning"),inputClasses:D()("form-item__input","container-border","admin-lot-preview__input"),setNextLotInputClasses:D()("form-item__input","container-border","admin-lot-preview__input","admin-lot-preview__set-next-lot-input")},rt=function(e,t,n){try{e(function(e){return function(){var t=Object(v.a)(m.a.mark((function t(n){var a,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,W.getAccessToken();case 2:return a=t.sent,t.next=5,fetch("".concat(se,"/").concat(e),{method:"DELETE",headers:a?{Authorization:"Bearer ".concat(a)}:{}});case 5:if(!(r=t.sent).ok){t.next=10;break}n({type:me,payload:{id:e}}),t.next=15;break;case 10:return t.t0=Error,t.next=13,r.text();case 13:throw t.t1=t.sent,new t.t0(t.t1);case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t)),n({message:"Lot was successfully deleted",successed:!0})}catch(a){n({message:a.message,successed:!1})}};function st(e){var t=e.lot,n=e.connection,s=e.setOperationResult,c=Object(o.b)(),u=Object(r.useState)({lotId:"",previousLotId:"",visible:!1}),l=Object(ne.a)(u,2),d=l[0],b=l[1],h=D()("admin-lot-preview__input-wrapper",{"admin-lot-preview__input-wrapper--visible":d.visible}),j=D()("button","admin-lot-preview__button",{"admin-lot-preview__button--hidden":d.visible}),p=Object(r.useCallback)((function(e,t){if(e.isSold||e.isActive)t({message:"The lot has already been sold!",successed:!1});else{var n=(new Re.a).withUrl(ce).build();n.start().then((function(){n.invoke("StartLot","active",e.id),t({message:"Lot started successfully!",successed:!0})}))}}),[n,t]),f=Object(r.useCallback)((function(e,t){rt(t,e,s)}),[s]);return Object(a.jsxs)("div",{className:at.lotPreviewClasses,children:[Object(a.jsxs)(i.c,{className:at.lotNameClasses,to:"/lots/".concat(t.id),tag:i.b,children:[t.name," [ID:",t.id,"]"]}),Object(a.jsxs)("div",{className:"admin-lot-preview__buttons-wrapper",children:[Object(a.jsx)("button",{className:at.buttonClasses,disabled:!n,onClick:function(){return p(t,s)},children:"Start Lot"}),Object(a.jsx)("button",{className:j,disabled:!n,onClick:function(){return function(e,t){e({lotId:"",previousLotId:"",visible:!t.visible})}(b,d)},children:"Start After..."}),Object(a.jsxs)("div",{className:h,children:[Object(a.jsx)("input",{className:at.setNextLotInputClasses,value:d.nextLotId,onChange:function(e){return b({lotId:t.id,previousLotId:e.target.value,visible:!0})},type:"number",required:!0}),Object(a.jsx)("button",{className:at.buttonSetNexLotClasses,disabled:!n,onClick:function(){nt(t,d,s,b)},children:"Set"})]}),Object(a.jsx)("button",{className:at.buttonWarningClasses,onClick:function(){return f(t.id,c)},children:"Delete lot"}),Object(a.jsx)("div",{className:"admin-lot-preview__link-wrapper",children:Object(a.jsx)(i.b,{className:at.buttonClasses,to:"/lots/".concat(t.id),tag:i.b,children:"Go to the lot page"})})]})]})}function ct(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.lotsInfo})),n=Object(o.c)((function(e){return e.app.lotLoading})),s=Object(r.useState)({message:"",successed:!0}),c=Object(ne.a)(s,2),i=c[0],u=c[1],l=D()("main","main__admin-lot-preview-wrapper","container-border");Object(r.useEffect)((function(){e(_e(1,!1))}),[e]);var d=Object(r.useState)(null),b=Object(ne.a)(d,2),h=b[0],j=b[1];return Object(r.useEffect)((function(){var e=(new Re.a).withUrl(ce).build();e.start().then((function(){j(e)}))}),[]),n?Object(a.jsx)(F,{}):t.lots?t.lots.length?Object(a.jsxs)("div",{className:l,children:[Object(a.jsx)(Ye,{successed:i.successed,message:i.message}),t.lots.map((function(e){return Object(a.jsx)(st,{lot:e,connection:h,setOperationResult:u},e.id)})),Object(a.jsx)("div",{className:"main__pagination",children:Object(a.jsx)(Ne,{pageCount:t.totalPages})})]}):Object(a.jsx)(V,{message:"There are no lots on the server"}):Object(a.jsx)(V,{message:"Error"})}function it(){var e=Object(r.useState)(null),t=Object(ne.a)(e,2),n=t[0],s=t[1],c=Object(r.useCallback)(Object(v.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.hasRole(R);case 2:t=e.sent,s(t);case 4:case"end":return e.stop()}}),e)}))),[]);return Object(r.useEffect)((function(){W.subscribe((function(){return c()})),c()}),[c]),n?Object(a.jsx)("div",{children:Object(a.jsx)(ct,{})}):!1===n?Object(a.jsx)(V,{message:"You dont have access to this component!"}):Object(a.jsx)(F,{})}function ot(){var e=Object(r.useState)([]),t=Object(ne.a)(e,2),n=t[0],s=t[1],c=Object(o.b)(),i=Object(o.c)((function(e){return e.app.winnersLoading})),u=Object(r.useCallback)(Object(v.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c({type:ge}),e.next=3,fetch("api/winners");case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,c({type:xe}),s(n);case 9:case"end":return e.stop()}}),e)}))),[c]);Object(r.useEffect)((function(){u()}),[]);var l=Object(r.useMemo)((function(){return{mainClasses:D()("main","container-border","main__winners"),tableClasses:D()("table")}}),[]);return i?Object(a.jsx)(F,{}):n.length?Object(a.jsx)("div",{className:l.mainClasses,children:Object(a.jsxs)("table",{className:l.tableClasses,children:[Object(a.jsx)("thead",{className:"table__header",children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{className:"table__header-item",children:"Lot ID"}),Object(a.jsx)("th",{className:"table__header-item",children:"Lot Name"}),Object(a.jsx)("th",{className:"table__header-item",children:"Winner ID"}),Object(a.jsx)("th",{className:"table__header-item",children:"Winner Name"}),Object(a.jsx)("th",{className:"table__header-item",children:"Sold Price"})]})}),Object(a.jsx)("tbody",{className:"table__body",children:n.map((function(e){var t,n;return Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{className:"table__item",children:e.id}),Object(a.jsx)("th",{className:"table__item",children:e.lotName}),Object(a.jsx)("th",{className:"table__item",children:null!==(t=e.userId)&&void 0!==t?t:"-"}),Object(a.jsx)("th",{className:"table__item",children:null!==(n=e.ownerName)&&void 0!==n?n:"-"}),Object(a.jsxs)("th",{className:"table__item",children:[e.priceUsd," USD"]})]},e.id)}))})]})}):Object(a.jsx)(V,{message:"No information about the lot winners!"})}var ut=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){var e=D()("casing","casing__body");return Object(a.jsx)("div",{className:e,children:Object(a.jsxs)(ue,{className:"container",children:[Object(a.jsx)(p.b,{exact:!0,path:"/",component:Ae}),Object(a.jsx)(p.b,{path:"/Identity/Account/Login",component:B}),Object(a.jsx)(p.b,{exact:!0,path:"/timer",component:Ee}),Object(a.jsx)(p.b,{path:"/lots/:id?",component:ze}),Object(a.jsx)(p.b,{path:"/winners",component:ot}),Object(a.jsx)(Le,{path:"/new-lot",component:tt}),Object(a.jsx)(Le,{path:"/admin-panel",component:it}),Object(a.jsx)(p.b,{path:P.ApiAuthorizationPrefix,component:G})]})})}}]),n}(r.Component);ut.displayName=ut.name;var lt={lots:[],activePage:1,totalPages:0,onlyUnsold:!0},dt={lotLoading:!1,winnersLoading:!1},bt=Object(u.c)({lotsInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case de:return Object(O.a)(Object(O.a)({},e),{},{lots:t.payload.lots,totalPages:t.payload.pagesCount,activePage:t.payload.activePage,onlyUnsold:t.payload.onlyUnsold});case be:return Object(O.a)(Object(O.a)({},e),{},{lots:e.lots.concat(t.payload)});case he:return Object(O.a)(Object(O.a)({},e),{},{lots:e.lots.map((function(e){return e.id===t.payload.id?t.payload:e}))});case je:return Object(O.a)(Object(O.a)({},e),{},{lots:e.lots.map((function(e){return e.id===t.payload.id?Object(O.a)(Object(O.a)({},e),{},{priceUsd:t.payload.price}):e}))});case pe:return Object(O.a)(Object(O.a)({},e),{},{lots:e.lots.map((function(e){return e.id===t.payload.id?Object(O.a)(Object(O.a)({},e),{},{isActive:t.payload.isActive}):e}))});case fe:return Object(O.a)(Object(O.a)({},e),{},{lots:e.lots.map((function(e){return e.id===t.payload.id?Object(O.a)(Object(O.a)({},e),{},{isActive:!1,isSold:!0}):e}))});case me:return Object(O.a)(Object(O.a)({},e),{},{lots:e.lots.filter((function(e){return e.id!==t.payload.id}))});default:return e}},app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ve:return Object(O.a)(Object(O.a)({},e),{},{lotLoading:!0});case Oe:return Object(O.a)(Object(O.a)({},e),{},{lotLoading:!1});case ge:return Object(O.a)(Object(O.a)({},e),{},{winnersLoading:!0});case xe:return Object(O.a)(Object(O.a)({},e),{},{winnersLoading:!1});default:return e}}}),ht=document.getElementsByTagName("base")[0].getAttribute("href"),jt=document.getElementById("root"),pt=Object(u.e)(bt,Object(u.d)(Object(u.a)(l.a)));c.a.render(Object(a.jsx)(o.a,{store:pt,children:Object(a.jsx)(i.a,{basename:ht,children:Object(a.jsx)(ut,{})})}),jt)}},[[65,1,2]]]);
//# sourceMappingURL=main.f8b66333.chunk.js.map